<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å³¡è°·äººæ ¼æµ‹è¯„ Â· ç‹è€…è£è€€</title>
<!-- OG / Social sharing meta -->
<meta property="og:title" content="å³¡è°·äººæ ¼æµ‹è¯„ Â· ç‹è€…è£è€€">
<meta property="og:description" content="ä»äºŒåé“é¢˜åº“éšæœºæŠ½å–å…«é“ï¼Œæ­ç¤ºä½ åœ¨å³¡è°·ä¸­çš„çœŸå®äººæ ¼æŠ•å½±ã€‚å‘ç°ä½ çš„åˆ†è·¯å½’å±ï¼">
<meta property="og:type" content="website">
<meta property="og:url" content="http://wzry.xuziyu.my/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="å³¡è°·äººæ ¼æµ‹è¯„ Â· ç‹è€…è£è€€">
<meta name="twitter:description" content="äºŒåé“é—®é¢˜ï¼Œæ­ç¤ºä½ åœ¨å³¡è°·ä¸­çš„çœŸå®äººæ ¼æŠ•å½±ã€‚å‘ç°ä½ çš„åˆ†è·¯å½’å±ï¼">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --gold:#D4AF37;--gold-l:#FFE566;--gold-d:rgba(212,175,55,.22);
  --dark:#07070F;--dark2:#0D0D1A;--card:rgba(13,13,26,.88);
  --txt:#EDE8D8;--mute:#8A8AA8;
  --J:#FF3B3B;--M:#BB44FF;--C:#3388FF;--G:#FFAA00;--R:#33CC77;
}
html{scroll-behavior:smooth}
body{background:var(--dark);color:var(--txt);font-family:'Noto Serif SC','PingFang SC','Hiragino Sans GB','Microsoft YaHei',serif;overflow-x:hidden;min-height:100vh}
#bgc{position:fixed;inset:0;z-index:0;pointer-events:none}
#cfc{position:fixed;inset:0;z-index:200;pointer-events:none;display:none}
.sec{min-height:100vh;position:relative;z-index:1;display:none;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px}
.sec.on{display:flex}
.tag{display:inline-block;padding:4px 18px;border:1px solid var(--gold-d);border-radius:20px;font-size:11px;letter-spacing:5px;color:var(--gold);margin-bottom:18px;text-transform:uppercase}
.stitle{font-size:clamp(26px,6vw,52px);font-weight:900;background:linear-gradient(135deg,#FFE566 0%,#D4AF37 50%,#FF9900 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2;margin-bottom:14px;filter:drop-shadow(0 0 20px rgba(212,175,55,.3))}
.sdesc{font-size:14px;color:var(--mute);line-height:1.9;max-width:540px;text-align:center}
.bg{display:inline-flex;align-items:center;gap:10px;padding:15px 44px;background:linear-gradient(135deg,#D4AF37,#FF9900);color:#000;font-size:17px;font-weight:700;border:none;border-radius:50px;cursor:pointer;overflow:hidden;transition:all .3s;box-shadow:0 0 30px rgba(212,175,55,.35);font-family:inherit}
.bg:hover{transform:translateY(-3px);box-shadow:0 8px 40px rgba(212,175,55,.55)}
.bg:active{transform:translateY(0)}
.bo{display:inline-flex;align-items:center;gap:8px;padding:12px 30px;background:transparent;color:var(--gold);font-size:14px;border:1px solid var(--gold-d);border-radius:50px;cursor:pointer;transition:all .3s;font-family:inherit}
.bo:hover{background:var(--gold-d);border-color:var(--gold)}
.orn{display:flex;align-items:center;gap:12px;width:100%;margin:28px 0}
.orn::before,.orn::after{content:'';flex:1;height:1px}
.orn::before{background:linear-gradient(90deg,transparent,var(--gold-d))}
.orn::after{background:linear-gradient(90deg,var(--gold-d),transparent)}
.orn span{font-size:14px;color:var(--gold);opacity:.5}

/* HERO */
#s1{background:radial-gradient(ellipse at 50% 40%,rgba(204,34,0,.13) 0%,transparent 65%),radial-gradient(ellipse at 70% 70%,rgba(212,175,55,.07) 0%,transparent 50%);text-align:center;gap:0}
.hemb{font-size:90px;animation:flt 3.5s ease-in-out infinite;filter:drop-shadow(0 0 30px rgba(212,175,55,.6));margin-bottom:24px;line-height:1}
.hkic{font-size:11px;letter-spacing:8px;color:var(--gold);margin-bottom:20px;opacity:.75}
.htit{font-size:clamp(40px,10vw,84px);font-weight:900;background:linear-gradient(135deg,#FFE566 0%,#D4AF37 40%,#FF9900 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.15;margin-bottom:18px;filter:drop-shadow(0 0 40px rgba(212,175,55,.4))}
.hsub{font-size:15px;color:var(--mute);line-height:1.9;margin-bottom:44px;max-width:420px}
.hsts{display:flex;gap:48px;justify-content:center;margin-bottom:52px}
.snum{font-size:30px;font-weight:900;color:var(--gold)}
.slbl{font-size:12px;color:var(--mute);margin-top:2px;letter-spacing:1px}

/* INTRO */
#s2{justify-content:flex-start;padding-top:70px;padding-bottom:80px}
.inner{max-width:1100px;width:100%;margin:0 auto}
.ih{text-align:center;margin-bottom:50px}
.lore{background:var(--card);border:1px solid var(--gold-d);border-radius:18px;padding:34px 40px;margin-bottom:60px;line-height:2;font-size:14px;color:var(--mute);backdrop-filter:blur(12px)}
.lore strong{color:var(--gold)}
.lore p+p{margin-top:16px}
.rgrid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;width:100%;margin-bottom:50px}
@media(max-width:900px){.rgrid{grid-template-columns:repeat(3,1fr)}}
@media(max-width:580px){.rgrid{grid-template-columns:repeat(2,1fr)}}
.rcd{background:var(--card);border:1px solid transparent;border-radius:16px;padding:26px 18px;transition:all .3s;position:relative;overflow:hidden;backdrop-filter:blur(12px)}
.rcd::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--rc)}
.rcd:hover{border-color:var(--rc);transform:translateY(-6px);box-shadow:0 12px 40px rgba(0,0,0,.4)}
.rico{font-size:36px;margin-bottom:10px;filter:drop-shadow(0 0 8px var(--rc));display:block}
.rnm{font-size:18px;font-weight:700;color:var(--rc);margin-bottom:4px}
.ren{font-size:10px;letter-spacing:3px;color:var(--mute);margin-bottom:10px;text-transform:uppercase}
.rds{font-size:12px;color:var(--mute);line-height:1.7}
.rhrs{margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,.07)}
.rht{display:inline-block;padding:3px 10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:20px;font-size:11px;color:var(--mute);margin:2px 2px 0 0}

/* QUIZ */
#s3{background:radial-gradient(ellipse at 50% 40%,rgba(100,50,200,.08) 0%,transparent 65%)}
.qwrp{max-width:680px;width:100%}
.qhd{text-align:center;margin-bottom:36px}
.qpr{display:flex;align-items:center;gap:14px;margin-bottom:36px}
.qpt{flex:1;height:4px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden}
.qpf{height:100%;background:linear-gradient(90deg,var(--gold),#FF9900);border-radius:2px;transition:width .5s ease;width:0%}
.qptx{font-size:12px;color:var(--gold);white-space:nowrap}
.qcd{background:var(--card);border:1px solid var(--gold-d);border-radius:22px;padding:42px 40px;backdrop-filter:blur(20px);animation:sup .4s ease}
@media(max-width:500px){.qcd{padding:28px 20px}}
.qnum{font-size:11px;letter-spacing:4px;color:var(--gold);margin-bottom:18px;text-transform:uppercase}
.qtxt{font-size:18px;font-weight:700;line-height:1.65;margin-bottom:30px;color:var(--txt)}
.qops{display:flex;flex-direction:column;gap:10px}
.qop{display:flex;align-items:flex-start;gap:14px;padding:15px 18px;background:rgba(255,255,255,.025);border:1px solid rgba(255,255,255,.07);border-radius:12px;cursor:pointer;transition:all .22s;text-align:left;font-size:14px;color:var(--mute);line-height:1.65;width:100%;font-family:inherit}
.qop:hover{background:rgba(212,175,55,.07);border-color:rgba(212,175,55,.35);color:var(--txt);transform:translateX(4px)}
.qop:hover .olk{background:var(--gold);color:#000;border-color:var(--gold)}
.olk{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;min-width:28px;border:1px solid var(--gold-d);border-radius:7px;font-size:12px;font-weight:700;color:var(--gold);transition:all .22s}
.qback{display:inline-flex;align-items:center;gap:6px;padding:8px 20px;background:transparent;color:var(--mute);font-size:13px;border:1px solid rgba(255,255,255,.08);border-radius:20px;cursor:pointer;transition:all .2s;font-family:inherit;margin-top:16px}
.qback:hover{color:var(--gold);border-color:var(--gold-d)}

/* LOADING */
#s4{gap:24px;text-align:center}
.lorb{width:80px;height:80px;border-radius:50%;border:3px solid transparent;border-top-color:var(--gold);border-right-color:var(--gold-l);animation:spn 1s linear infinite;box-shadow:0 0 30px rgba(212,175,55,.4)}
.ltxt{font-size:14px;letter-spacing:4px;color:var(--gold);animation:pls 1.5s ease-in-out infinite}

/* RESULTS */
#s5{justify-content:flex-start;padding-top:70px;padding-bottom:80px}
.rsin{max-width:860px;width:100%;margin:0 auto}
.rsh{text-align:center;margin-bottom:50px}
.rvl{font-size:11px;letter-spacing:5px;color:var(--gold);margin-bottom:10px;animation:pls 2s infinite}
.prcd{border-radius:24px;margin-bottom:28px;animation:cin .7s ease}
.scd{border-radius:16px;padding:28px 32px;display:flex;align-items:center;gap:22px;margin-bottom:28px;animation:cin .7s ease .25s backwards;width:100%}
@media(max-width:500px){.scd{flex-direction:column;text-align:center}}
.dmp{background:var(--card);border:1px solid var(--gold-d);border-radius:16px;padding:28px 32px;backdrop-filter:blur(12px);margin-bottom:28px;animation:cin .7s ease .45s backwards}
.dmh{font-size:11px;letter-spacing:4px;color:var(--gold);margin-bottom:22px;text-transform:uppercase}
.dmr{display:flex;align-items:center;gap:14px;margin-bottom:13px}
.dml{font-size:12px;color:var(--mute);width:170px;flex-shrink:0}
.dmt{flex:1;height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden}
.dmf{height:100%;border-radius:3px;width:0%;transition:width 1.2s ease .6s}
.dmp2{font-size:11px;width:32px;text-align:right}
@media(max-width:500px){.dml{width:100px;font-size:11px}}
.fcmp{background:linear-gradient(135deg,rgba(100,50,200,.2),rgba(212,175,55,.1));border:1px solid var(--gold-d);border-radius:16px;padding:28px 32px;text-align:center;margin-bottom:28px;animation:cin .5s ease;display:none}
.fcmp.on{display:block}
.rwp{border-radius:16px;padding:32px;text-align:center;margin-bottom:28px;animation:cin .5s ease;display:none}
.rwp.on{display:block}
.ract{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;animation:cin .7s ease .6s backwards}

/* HERO CHALLENGE (s6) */
#s6{background:radial-gradient(ellipse at 50% 40%,rgba(212,175,55,.07) 0%,transparent 65%)}
.hcin{max-width:680px;width:100%}
.hccd{background:var(--card);border:1px solid var(--gold-d);border-radius:20px;padding:36px;backdrop-filter:blur(20px);margin-bottom:16px;animation:cin .5s ease}
@media(max-width:500px){.hccd{padding:24px 16px}}
.hgrid{display:flex;flex-wrap:wrap;gap:8px;max-height:230px;overflow-y:auto;padding:4px 2px}
.hgrid::-webkit-scrollbar{width:4px}
.hgrid::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:2px}
.hbt{padding:8px 14px;border-radius:20px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.03);color:var(--mute);font-size:13px;cursor:pointer;transition:all .2s;font-family:inherit}
.hbt:hover{border-color:var(--gold-d);color:var(--txt)}
.hbt.on{background:var(--gold);border-color:var(--gold);color:#000;font-weight:700}
.hsrch{width:100%;padding:10px 14px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:10px;color:var(--txt);font-size:13px;margin-bottom:12px;font-family:inherit;outline:none}
.hsrch:focus{border-color:var(--gold-d)}
.hcrs{border-radius:14px;padding:28px;text-align:center;margin-bottom:20px;display:none;animation:cin .4s ease}
.hcrs.on{display:block}
.hsel-row{font-size:13px;color:var(--gold);margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,.07);display:none}
.pbl{font-size:13px;color:var(--gold);margin-bottom:14px;display:flex;align-items:center;gap:6px}

/* SHARE (s7) */
#s7{background:radial-gradient(ellipse at 50% 40%,rgba(0,80,200,.08) 0%,transparent 65%)}
.shin{max-width:660px;width:100%;text-align:center}
.shcd{background:var(--card);border:1px solid var(--gold-d);border-radius:20px;padding:38px 36px;backdrop-filter:blur(20px);margin-bottom:16px;animation:cin .5s ease}
@media(max-width:500px){.shcd{padding:26px 18px}}
.shbi{font-size:52px;margin-bottom:16px}
.shtl{font-size:22px;font-weight:700;color:var(--gold);margin-bottom:10px}
.shds{font-size:13px;color:var(--mute);line-height:1.9;margin-bottom:28px}
.pblk{background:rgba(255,255,255,.025);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:22px;margin-bottom:22px;text-align:left;transition:border-color .3s}
.pblk.err{border-color:#FF4444}
.pops{display:flex;gap:8px;flex-wrap:wrap}
.pbt{padding:9px 16px;border-radius:20px;border:1px solid rgba(255,255,255,.12);background:transparent;color:var(--mute);font-size:13px;cursor:pointer;transition:all .22s;font-family:inherit}
.pbt:hover{border-color:var(--gold-d);color:var(--txt)}
.pbt.on{background:var(--gold);border-color:var(--gold);color:#000;font-weight:700}
.lbx{background:rgba(0,0,0,.4);border:1px solid var(--gold-d);border-radius:10px;padding:13px 18px;font-size:12px;color:var(--gold);word-break:break-all;text-align:left;font-family:monospace;margin-bottom:14px;display:none;line-height:1.6}
.shbs{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}

/* VOTING (s8) */
#s8{background:radial-gradient(ellipse at 50% 30%,rgba(212,175,55,.1) 0%,transparent 60%),radial-gradient(ellipse at 80% 80%,rgba(187,68,255,.07) 0%,transparent 50%);justify-content:flex-start;padding-top:70px;padding-bottom:80px}
.vin{max-width:1000px;width:100%;margin:0 auto}
.vh{text-align:center;margin-bottom:40px}
.vtabs{display:flex;gap:12px;justify-content:center;margin-bottom:32px;flex-wrap:wrap}
.vtab{padding:10px 28px;border-radius:50px;border:1px solid var(--gold-d);background:transparent;color:var(--mute);font-size:13px;cursor:pointer;transition:all .25s;font-family:inherit}
.vtab.on{background:var(--gold);border-color:var(--gold);color:#000;font-weight:700}
.vpanel{display:none}
.vpanel.on{display:block}
.vcd{background:var(--card);border:1px solid var(--gold-d);border-radius:20px;padding:36px;backdrop-filter:blur(20px);margin-bottom:24px;animation:cin .5s ease}
@media(max-width:500px){.vcd{padding:22px 16px}}
.vsrch{width:100%;padding:10px 14px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:10px;color:var(--txt);font-size:13px;margin-bottom:14px;font-family:inherit;outline:none}
.vsrch:focus{border-color:var(--gold-d)}
.vgrid{display:flex;flex-wrap:wrap;gap:8px;max-height:240px;overflow-y:auto;padding:4px 2px;margin-bottom:16px}
.vgrid::-webkit-scrollbar{width:4px}
.vgrid::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:2px}
.vbt{padding:8px 14px;border-radius:20px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.03);color:var(--mute);font-size:13px;cursor:pointer;transition:all .2s;font-family:inherit}
.vbt:hover:not(.dis){border-color:var(--gold-d);color:var(--txt)}
.vbt.on{background:var(--gold);border-color:var(--gold);color:#000;font-weight:700}
.vbt.dis{opacity:.35;cursor:not-allowed}
.vadd-row{display:none;margin-bottom:10px}
.vadd-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;
  border-radius:20px;border:1px solid var(--gold-d);background:rgba(212,175,55,.08);
  color:var(--gold);font-size:13px;cursor:pointer;transition:all .22s;font-family:inherit}
.vadd-btn:hover{background:rgba(212,175,55,.18);border-color:var(--gold)}
.vsel-info{font-size:13px;color:var(--gold);margin-bottom:14px;min-height:20px}
.vbar-list{display:flex;flex-direction:column;gap:11px}
.vbar-row{display:flex;align-items:center;gap:10px}
.vbar-rank{font-size:13px;font-weight:700;color:var(--gold);width:22px;text-align:right;flex-shrink:0}
.vbar-name{font-size:13px;color:var(--txt);width:70px;flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.vbar-name.voted{color:var(--gold);font-weight:700}
.vbar-track{flex:1;height:8px;background:rgba(255,255,255,.06);border-radius:4px;overflow:hidden}
.vbar-fill{height:100%;border-radius:4px;background:linear-gradient(90deg,var(--gold),#FF9900);transition:width 1.2s ease}
.vbar-fill.voted{background:linear-gradient(90deg,#33CC77,#00BB66)}
.vbar-cnt{font-size:12px;color:var(--mute);width:52px;text-align:right;flex-shrink:0}

/* ANIMATIONS */
@keyframes flt{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
@keyframes sup{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
@keyframes cin{from{opacity:0;transform:scale(.96) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes spn{to{transform:rotate(360deg)}}
@keyframes pls{0%,100%{opacity:.4}50%{opacity:1}}
@keyframes shk{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--dark)}
::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:3px}
</style>
</head>
<body>
<canvas id="bgc"></canvas>
<canvas id="cfc"></canvas>

<!-- Â§1 HERO -->
<section id="s1" class="sec on">
  <div class="hemb">âš”ï¸</div>
  <div class="hkic">ç‹è€…è£è€€ Â· å³¡è°·äººæ ¼ç ”ç©¶æ‰€</div>
  <h1 class="htit">ä½ çš„å³¡è°·<br>çµé­‚æ˜¯è°ï¼Ÿ</h1>
  <p class="hsub" id="hsub">ä»äºŒåé“é¢˜åº“éšæœºæŠ½å–å…«é“ï¼Œæ­ç¤ºä½ åœ¨å³¡è°·ä¸­çš„çœŸå®äººæ ¼æŠ•å½±<br>å‘ç°ä½ çš„åˆ†è·¯å½’å±ã€è‹±é›„ç”»åƒä¸éšè—ç‰¹è´¨</p>
  <div class="hsts">
    <div><div class="snum">8</div><div class="slbl">é“éšæœºé¢˜</div></div>
    <div><div class="snum">5</div><div class="slbl">æ¡åˆ†è·¯</div></div>
    <div><div class="snum">100+</div><div class="slbl">ä½è‹±é›„åŒ¹é…</div></div>
  </div>
  <div style="display:flex;gap:14px;flex-wrap:wrap;justify-content:center">
    <button class="bg" onclick="go('s2')">âš”ï¸&nbsp; è¿›å…¥å³¡è°·</button>
    <button class="bo" onclick="go('s8');initVoting()">ğŸ†&nbsp; è‹±é›„äººæ°”æ¦œ</button>
  </div>
</section>

<!-- Â§2 INTRO -->
<section id="s2" class="sec" style="justify-content:flex-start">
  <div class="inner">
    <div class="ih">
      <div class="tag">HONOR OF KINGS</div>
      <h2 class="stitle">ç‹è€…è£è€€ï¼šå³¡è°·çš„ä¸–ç•Œ</h2>
      <p class="sdesc">äº†è§£è¿™æ¬¾äº¿ä¸‡ç©å®¶å…±åŒå¾æˆ˜çš„ç«æŠ€èˆå°ï¼Œä»¥åŠäº”æ¡åˆ†è·¯çš„æˆ˜åœºå®šä¹‰ä¸äººæ ¼æ˜ å°„</p>
    </div>
    <div class="lore">
      <p>ã€Šç‹è€…è£è€€ã€‹æ˜¯è…¾è®¯å¤©ç¾å·¥ä½œå®¤å¼€å‘çš„<strong>å¤šäººåœ¨çº¿æˆ˜æœ¯ç«æŠ€æ¸¸æˆï¼ˆMOBAï¼‰</strong>ï¼Œè‡ª2015å¹´ä¸Šçº¿ä»¥æ¥å·²æˆä¸ºå…¨çƒç”¨æˆ·è§„æ¨¡æœ€å¤§çš„ç§»åŠ¨ç«æŠ€æ¸¸æˆä¹‹ä¸€ã€‚æ¸¸æˆä»¥ <strong>5v5å¯¹æŠ—</strong> ä¸ºæ ¸å¿ƒï¼Œä¸¤æ”¯é˜Ÿä¼åœ¨"ç‹è€…å³¡è°·"åœ°å›¾ä¸­äº‰å¤ºï¼Œç‡å…ˆæ‘§æ¯å¯¹æ–¹ä¸»åŸºåœ°ï¼ˆæ°´æ™¶ï¼‰çš„ä¸€æ–¹è·èƒœã€‚</p>
      <p>æ¸¸æˆä¸­æ‹¥æœ‰è¶…è¿‡ <strong>100ä½è‹±é›„</strong>ï¼Œåˆ†ä¸ºæ³•å¸ˆã€å¦å…‹ã€æˆ˜å£«ã€åˆºå®¢ã€å°„æ‰‹ã€è¾…åŠ©å…­å¤§ç±»å‹ã€‚ç©å®¶åœ¨å¯¹å±€å¼€å§‹å‰é€‰æ‹©è‹±é›„ï¼Œå¹¶æŒ‰ç…§æˆ˜æœ¯åˆ†å·¥è¿›é©»æŒ‡å®šåˆ†è·¯ï¼Œé€šè¿‡ <strong>å‡»è´¥é‡æ€ªã€æ‘§æ¯é˜²å¾¡å¡”ã€äº‰å¤ºèµ„æº</strong> ç­‰æ–¹å¼è·å¾—ç»æµä¼˜åŠ¿ï¼Œæœ€ç»ˆæºæ‰‹èµ¢å¾—èƒœåˆ©ã€‚</p>
      <p>ç ”ç©¶è¡¨æ˜ï¼Œç©å®¶å¯¹åˆ†è·¯çš„åå¥½å¹¶ééšæœºé€‰æ‹©ï¼Œè€Œæ˜¯å…¶<strong>çœŸå®äººæ ¼ç‰¹è´¨åœ¨è™šæ‹Ÿç©ºé—´ä¸­çš„æ·±å±‚æŠ•å°„</strong>ã€‚é€šè¿‡åˆ†æå†³ç­–é£æ ¼ã€ç¤¾äº¤æ¨¡å¼ä¸å‹åŠ›åº”å¯¹æ–¹å¼ï¼Œå¯ä»¥ç²¾å‡†æ¨æµ‹ç©å®¶åœ¨å³¡è°·ä¸­çš„"çµé­‚å½’å±"ã€‚</p>
    </div>
    <div style="text-align:center;margin-bottom:30px">
      <div class="tag">FIVE PATHS Â· FIVE PERSONAS</div>
      <h2 class="stitle">äº”æ¡åˆ†è·¯ Â· äº”ç§äººæ ¼</h2>
    </div>
    <div class="rgrid" id="rgrid"></div>
    <div style="text-align:center;margin-top:10px">
      <button class="bg" onclick="go('s3');initQ()">âœ¨&nbsp; å¼€å§‹äººæ ¼æµ‹è¯„</button>
    </div>
  </div>
</section>

<!-- Â§3 QUIZ -->
<section id="s3" class="sec">
  <div class="qwrp">
    <div class="qhd">
      <div class="tag">PERSONA TEST</div>
      <h2 class="stitle">å³¡è°·äººæ ¼æµ‹è¯„</h2>
      <p class="sdesc" style="margin:0 auto">é€‰æ‹©æœ€ç¬¦åˆä½ çœŸå®æƒ³æ³•çš„é€‰é¡¹ï¼Œæ— éœ€è€ƒè™‘ä½ çš„æ¸¸æˆç»éªŒ</p>
    </div>
    <div class="qpr">
      <div class="qpt"><div class="qpf" id="qpf"></div></div>
      <span class="qptx" id="qptx">0 / 8</span>
    </div>
    <div id="qw"></div>
  </div>
</section>

<!-- Â§4 LOADING -->
<section id="s4" class="sec">
  <div class="lorb"></div>
  <div class="ltxt">å³¡è°·æ¡£æ¡ˆåˆ†æä¸­â€¦â€¦</div>
  <div style="font-size:13px;color:var(--mute);margin-top:8px">æ­£åœ¨è§£æä½ çš„äººæ ¼ç»´åº¦</div>
</section>

<!-- Â§5 RESULTS -->
<section id="s5" class="sec" style="justify-content:flex-start">
  <div class="rsin">
    <div class="rsh">
      <div class="rvl">æµ‹è¯„å®Œæˆ Â· å³¡è°·æ¡£æ¡ˆå·²è§£é”</div>
      <h2 class="stitle">ä½ çš„å³¡è°·çµé­‚æ¡£æ¡ˆ</h2>
    </div>
    <div id="fcmp" class="fcmp"></div>
    <div id="rwp" class="rwp"></div>
    <div id="prc" class="prcd"></div>
    <div class="orn"><span>â—†</span></div>
    <p style="text-align:center;font-size:12px;color:var(--mute);margin-bottom:16px">ä½ çš„ç¬¬äºŒçµé­‚å½’å± Â· æ½œåœ¨åˆ†è·¯å€¾å‘</p>
    <div id="scd" class="scd"></div>
    <div class="dmp" id="dmp"></div>
    <div class="ract">
      <button class="bg" id="btn-hero-guess" style="display:none" onclick="go('s6');initHeroGuess()">ğŸ¯&nbsp; çŒœçŒœå¥½å‹çš„æœ¬å‘½è‹±é›„</button>
      <button class="bg" onclick="go('s7');initSh()">ğŸ”—&nbsp; åˆ†äº«ç»™å¥½å‹</button>
      <button class="bo" onclick="generateShareImg()">ğŸ“¸&nbsp; ä¿å­˜åˆ†äº«å›¾</button>
      <button class="bo" onclick="go('s8');initVoting()">ğŸ†&nbsp; è‹±é›„äººæ°”æ¦œ</button>
      <button class="bo" onclick="restart()">â†º&nbsp; é‡æ–°æµ‹è¯„</button>
    </div>
  </div>
</section>

<!-- Â§6 HERO CHALLENGE (friend guesses hero) -->
<section id="s6" class="sec">
  <div class="hcin">
    <div style="text-align:center;margin-bottom:32px">
      <div class="tag">HERO CHALLENGE</div>
      <h2 class="stitle">çŒœçŒœå¥½å‹çš„æœ¬å‘½è‹±é›„</h2>
      <p class="sdesc" style="margin:0 auto">ä½ çš„å¥½å‹éšè—äº†ä»–çš„æœ¬å‘½è‹±é›„ï¼ŒçŒœå¯¹äº†å°†è§£é”åŒé‡ç§°å· <strong style="color:var(--gold)">ã€Œå³¡è°·çµé­‚ä¼´ä¾£ã€</strong>ï¼</p>
    </div>
    <div id="hcrs" class="hcrs"></div>
    <div class="hccd" id="hc-card">
      <div class="pbl">ğŸ¯ ä»ä¸‹æ–¹é€‰æ‹©ä½ è®¤ä¸ºçš„ç­”æ¡ˆ</div>
      <input class="hsrch" id="hg-srch" placeholder="æœç´¢è‹±é›„åâ€¦â€¦" oninput="filterH('hg-srch','hg-grid')">
      <div class="hgrid" id="hg-grid"></div>
    </div>
    <div style="text-align:center;margin-top:16px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <button class="bo" onclick="go('s7');initSh()">è·³è¿‡ â†’ åˆ†äº«æˆ‘çš„ç»“æœ</button>
      <button class="bo" onclick="go('s5')">â† è¿”å›ç»“æœ</button>
    </div>
  </div>
</section>

<!-- Â§7 SHARE -->
<section id="s7" class="sec">
  <div class="shin">
    <div style="text-align:center;margin-bottom:32px">
      <div class="tag">SHARE &amp; WIN</div>
      <h2 class="stitle">æŒ‘æˆ˜ä½ çš„å¥½å‹</h2>
      <p class="sdesc" style="margin:0 auto">é¢„æµ‹å¥½å‹åˆ†è·¯ + è®¾ç½®æœ¬å‘½è‹±é›„è°œé¢˜ï¼ŒåŒé‡æŒ‘æˆ˜ï¼ŒåŒå€å¥–åŠ±ï¼</p>
    </div>
    <div class="shcd">
      <div class="shbi">ğŸ†</div>
      <h3 class="shtl">ç”Ÿæˆä½ çš„ä¸“å±æŒ‘æˆ˜é“¾æ¥</h3>
      <p class="shds">
        â‘  <strong style="color:var(--gold)">é€‰æ‹©ä½ çš„æœ¬å‘½è‹±é›„</strong>ï¼ˆå¯é€‰ï¼‰è®©å¥½å‹æ¥çŒœ<br>
        â‘¡ <strong style="color:var(--gold)">é¢„æµ‹å¥½å‹çš„åˆ†è·¯å½’å±</strong><br>
        ä¸¤é¡¹éƒ½çŒœå¯¹ï¼Œä½ ä»¬å°†å…±åŒè§£é” <strong style="color:var(--gold)">ã€Œå³¡è°·çµé­‚ä¼´ä¾£ã€âœ¨</strong> æœ€é«˜ç§°å·ï¼
      </p>
      <div class="pblk" style="margin-bottom:22px">
        <div class="pbl">ğŸ”¥ æˆ‘çš„æœ¬å‘½è‹±é›„æ˜¯â€¦ï¼ˆè®©å¥½å‹æ¥çŒœï¼å¯é€‰ï¼‰</div>
        <input class="hsrch" id="hp-srch" placeholder="æœç´¢è‹±é›„åâ€¦â€¦" oninput="filterH('hp-srch','hp-grid')">
        <div class="hgrid" id="hp-grid"></div>
        <div class="hsel-row" id="hp-sel">
          å·²é€‰æœ¬å‘½ï¼š<strong id="hp-sel-name" style="color:var(--gold)"></strong> âœ“
          &nbsp;<button class="bo" style="padding:3px 10px;font-size:11px" onclick="clearHero()">æ›´æ”¹</button>
        </div>
      </div>
      <div class="pblk" id="pblk">
        <div class="pbl">â­ æˆ‘é¢„æµ‹æˆ‘çš„å¥½å‹æœ€å¯èƒ½æ˜¯â€¦â€¦</div>
        <div class="pops" id="pops"></div>
      </div>
      <div class="lbx" id="lbx"></div>
      <div class="shbs">
        <button class="bg" id="bgen" onclick="genLnk()">ğŸ”—&nbsp; ç”Ÿæˆä¸“å±é“¾æ¥</button>
        <button class="bo" id="bcpy" style="display:none" onclick="cpyLnk()">ğŸ“‹&nbsp; å¤åˆ¶é“¾æ¥</button>
      </div>
    </div>
    <div style="text-align:center;margin-top:16px">
      <button class="bo" onclick="go('s5')">â† è¿”å›æˆ‘çš„ç»“æœ</button>
    </div>
  </div>
</section>

<!-- Â§8 VOTING -->
<section id="s8" class="sec">
  <div class="vin">
    <div class="vh">
      <div class="tag">HERO POPULARITY Â· è‹±é›„äººæ°”</div>
      <h2 class="stitle">å³¡è°·è‹±é›„äººæ°”æ¦œ</h2>
      <p class="sdesc" style="margin:0 auto">æ¯ä½ç©å®¶æ‹¥æœ‰ <strong style="color:var(--gold)">3ç¥¨</strong>ï¼Œä¸ºä½ å¿ƒç›®ä¸­æœ€çˆ±çš„å³¡è°·è‹±é›„æŠ•ç¥¨ï¼</p>
    </div>
    <div class="vtabs">
      <button class="vtab on" id="vtab-vote" onclick="switchVTab('vote')">ğŸ—³ï¸ æˆ‘è¦æŠ•ç¥¨</button>
      <button class="vtab" id="vtab-rank" onclick="switchVTab('rank')">ğŸ“Š äººæ°”æ’è¡Œ</button>
    </div>

    <!-- VOTE PANEL -->
    <div id="vp-vote" class="vpanel on">
      <div class="vcd">
        <div id="v-voted-banner" style="display:none;text-align:center;padding:16px 0 24px">
          <div style="font-size:44px;margin-bottom:12px">âœ…</div>
          <div style="font-size:18px;font-weight:700;color:var(--gold);margin-bottom:8px">ä½ å·²å®ŒæˆæŠ•ç¥¨ï¼</div>
          <div style="font-size:13px;color:var(--mute);margin-bottom:4px">å·²æŠ•ç¥¨ç»™ï¼š<span id="v-voted-names" style="color:var(--gold)"></span></div>
          <div style="font-size:12px;color:var(--mute);margin-bottom:20px">æ„Ÿè°¢ä½ å‚ä¸äººæ°”æŠ•ç¥¨ Â· æŸ¥çœ‹å³ä¾§æ’è¡Œæ¦œäº†è§£å®æ—¶ç»“æœ</div>
          <button class="bo" style="font-size:12px;padding:8px 20px" onclick="resetVote()">é‡æ–°é€‰æ‹©è‹±é›„</button>
        </div>
        <div id="v-vote-form">
          <div class="vsel-info" id="vsel-info">è¯·é€‰æ‹©æœ€å¤š 3 ä½è‹±é›„ï¼ˆå·²é€‰ 0 / 3ï¼‰</div>
          <input class="vsrch" id="vsrch" placeholder="æœç´¢è‹±é›„åâ€¦â€¦" oninput="filterVGrid()">
          <div class="vgrid" id="vgrid"></div>
          <div class="vadd-row" id="vadd-row">
            <button class="vadd-btn" onclick="addCustomHero()">
              ï¼‹ æ·»åŠ ã€Œ<span id="vadd-name"></span>ã€å¹¶æŠ•ç¥¨
            </button>
          </div>
          <div style="text-align:center;margin-top:8px">
            <button class="bg" onclick="submitVote()">ğŸ—³ï¸&nbsp; ç¡®è®¤æŠ•ç¥¨</button>
          </div>
        </div>
      </div>
    </div>

    <!-- RANK PANEL -->
    <div id="vp-rank" class="vpanel">
      <div class="vcd">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;flex-wrap:wrap;gap:10px">
          <div style="font-size:11px;letter-spacing:3px;color:var(--gold)">â—† è‹±é›„äººæ°”å®æ—¶æ’è¡Œ</div>
          <div style="font-size:12px;color:var(--mute)" id="vtotal-info"></div>
        </div>
        <div class="vbar-list" id="vbar-list"></div>
      </div>
    </div>

    <div style="text-align:center;margin-top:16px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <button class="bo" onclick="go('s1')">â† è¿”å›é¦–é¡µ</button>
      <button class="bo" id="vback-res" style="display:none" onclick="go('s5')">â† è¿”å›æˆ‘çš„ç»“æœ</button>
    </div>
  </div>
</section>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIREBASE CONFIG
   åœ¨ Firebase æ§åˆ¶å°åˆ›å»ºé¡¹ç›®åï¼Œå°†ä¸‹æ–¹å ä½ç¬¦æ›¿æ¢ä¸ºä½ çš„é…ç½®
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FIREBASE_CONFIG={
  apiKey:"AIzaSyCDe5uVbA2LFrdl4KbCmWtSxsdSVeu7PvE",
  authDomain:"wzry-voting.firebaseapp.com",
  databaseURL:"https://wzry-voting-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId:"wzry-voting",
  storageBucket:"wzry-voting.firebasestorage.app",
  messagingSenderId:"780965346684",
  appId:"1:780965346684:web:a9d0d63c5912d1bc6f78f9"
};
let fbDb=null;
function initFirebase(){
  if(FIREBASE_CONFIG.apiKey==='YOUR_API_KEY'){
    console.warn('Firebase å°šæœªé…ç½®');
    return;
  }
  // åŠ¨æ€å¼‚æ­¥åŠ è½½ SDKï¼Œä¸é˜»å¡é¡µé¢
  const CDN='https://cdn.jsdelivr.net/npm/firebase@9.23.0/';
  function loadScript(src,cb){
    const s=document.createElement('script');
    s.src=src;
    s.onload=cb;
    s.onerror=()=>console.warn('Firebase SDK åŠ è½½å¤±è´¥:',src);
    document.head.appendChild(s);
  }
  loadScript(CDN+'firebase-app-compat.js',()=>{
    loadScript(CDN+'firebase-database-compat.js',()=>{
      try{
        firebase.initializeApp(FIREBASE_CONFIG);
        fbDb=firebase.database();
        fbDb.ref('votes').on('value',snap=>{
          renderVoteResultsFromData(snap.val()||{});
        });
      }catch(e){
        console.warn('Firebase åˆå§‹åŒ–å¤±è´¥:',e);
      }
    });
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ROLES={
  J:{id:'J',name:'æ‰“é‡',en:'JUNGLE',title:'é‡åŒºéœ¸ä¸»',sub:'å­¤ç‹¬çš„çŒäºº',icon:'ğŸ—¡ï¸',c:'#FF3B3B',
    desc:'ä½ å°±åƒç°å®ä¸­çš„åˆ›ä¸šè€…æˆ–å±æœºå…¬å…³ä¸“å®¶ã€‚åœ¨æ··ä¹±ä¸­å¯»æ‰¾ç§©åºï¼Œåœ¨å±é™©ä¸­æ•æ‰æœºä¼šæ˜¯ä½ çš„æœ¬èƒ½ã€‚ä½ ä¸åœ¨ä¹ä»–äººçš„çŸ­è§†ï¼Œåªåœ¨ä¹æœ€ç»ˆçš„èƒœåˆ©ã€‚',
    shr:'é«˜ç‹¬ç«‹æ€§ Â· æè‡´è¡ŒåŠ¨åŠ› Â· é£é™©åå¥½',
    per:'é«˜æˆå°±åŠ¨æœºã€é£é™©åå¥½å‹å†³ç­–è€…ã€‚èƒ½å¤Ÿåœ¨ç¼ºä¹æ”¯æ´çš„æ··æ²Œç¯å¢ƒä¸­è¿…é€Ÿè¯†åˆ«æœºä¼šçª—å£ï¼Œä»¥é›·éœ†ä¹‹åŠ¿å°†å…¶è½¬åŒ–ä¸ºèƒœåŠ¿ã€‚',
    heroes:['éŸ©ä¿¡','æç™½','é•œ'],dim:{risk:90,emp:30,flex:70,end:50,aut:80}},
  M:{id:'M',name:'ä¸­è·¯',en:'MID LANE',title:'èˆå°æ ¸å¿ƒ',sub:'ç’€ç’¨çš„é¢†èˆªè€…',icon:'âœ¨',c:'#BB44FF',
    desc:'ä½ æ˜¯é‚£ä¸ªåœ¨èšå…‰ç¯ä¸‹ä¼˜é›…å¤„ç†å¤æ‚å±€é¢çš„æ™ºè€…ã€‚ä½ æ“…é•¿åè°ƒå„æ–¹èµ„æºï¼Œåœ¨å¿«é€Ÿçš„ä»»åŠ¡åˆ‡æ¢ä¸­ä¿æŒæ¸…é†’çš„å¤´è„‘ã€‚ç°å®ä¸­çš„ä½ å¾€å¾€æ˜¯ç¤¾äº¤åœˆçš„ä¸­å¿ƒã€‚',
    shr:'é«˜è®¤çŸ¥çµæ´»æ€§ Â· å®¡ç¾æ•é” Â· è¾å°„ç¤¾äº¤',
    per:'è®¤çŸ¥çµæ´»æ€§æé«˜ï¼Œæ“…é•¿åœ¨å¤šä»»åŠ¡ç¯å¢ƒä¸­ä¿æŒæ¸…é†’åˆ¤æ–­ã€‚å¤©ç„¶å¤„äºä¿¡æ¯äº¤æ±‡çš„ä¸­å¿ƒèŠ‚ç‚¹ï¼Œæ˜¯å›¢é˜Ÿä¸­ä¸å¯ç¼ºå°‘çš„æ¢çº½å‹äººæ ¼ã€‚',
    heroes:['è²‚è‰','è¯¸è‘›äº®','ç‹æ˜­å›'],dim:{risk:60,emp:65,flex:90,end:55,aut:70}},
  C:{id:'C',name:'å¯¹æŠ—è·¯',en:'TOP LANE',title:'ä¸åŠ¨å¦‚å±±',sub:'é“è¡€çš„å®ˆæœ›è€…',icon:'ğŸ›¡ï¸',c:'#3388FF',
    desc:'ä½ æ˜¯å›¢é˜Ÿä¸­æœ€åšå›ºçš„åŸºçŸ³ã€‚åœ¨æ²¡æœ‰é²œèŠ±å’ŒæŒå£°çš„è§’è½ï¼Œä½ ç‹¬è‡ªæ¶ˆåŒ–å‹åŠ›ï¼Œé»˜é»˜ç§¯ç´¯ä¼˜åŠ¿ã€‚ä½ æ·±ä¿¡å®å¹²èƒœè¿‡ç©ºè°ˆï¼Œå­¤ç‹¬æ˜¯ä½ æˆé•¿çš„ç£¨åˆ€çŸ³ã€‚',
    shr:'å¿ƒç†éŸ§æ€§è¶…å¼º Â· ä½ç¤¾äº¤ä¾èµ– Â· åŠ¡å®ä¸»ä¹‰',
    per:'æŒ«æŠ˜å¿è€åŠ›æå¼ºï¼Œåœ¨é«˜å‹å­¤ç«‹ç¯å¢ƒä¸­ä»èƒ½ä¿æŒç¨³å®šè¾“å‡ºã€‚ä¸è¿½æ±‚å³æ—¶è®¤å¯ï¼Œä»¥ä»»åŠ¡å®Œæˆè´¨é‡ä¸è‡ªæˆ‘ç²¾è¿›ä¸ºæœ€é«˜ä»·å€¼é©±åŠ¨åŠ›ã€‚',
    heroes:['é“ ','å•å¸ƒ','è€å¤«å­'],dim:{risk:40,emp:45,flex:50,end:75,aut:95}},
  G:{id:'G',name:'å‘è‚²è·¯',en:'BOT LANE',title:'åæœŸæ ¸å¿ƒ',sub:'å»¶è¿Ÿæ»¡è¶³çš„è‰ºæœ¯å®¶',icon:'ğŸ¹',c:'#FFAA00',
    desc:'ä½ æ‹¥æœ‰æƒŠäººçš„è€å¿ƒå’Œå¯¹æœªæ¥çš„åšå®šä¿¡å¿µã€‚ä½ å¯ä»¥å¿å—æ¼«é•¿çš„å¹³åº¸æœŸï¼Œåªä¸ºåœ¨æœ€åçš„å†³èƒœæ—¶åˆ»å±•ç°å‡ºæ‘§æ¯æ‹‰æœ½çš„ç»Ÿæ²»åŠ›ã€‚ä½ å¯¹æ•°æ®å’Œç»†èŠ‚çš„ç—´è¿·æˆå°±äº†ä½ çš„ä¸“ä¸šã€‚',
    shr:'å®Œç¾ä¸»ä¹‰ Â· é«˜åº¦è‡ªåˆ¶åŠ› Â· å»¶è¿Ÿæ»¡è¶³',
    per:'æ‹¥æœ‰å¼ºçƒˆçš„å®Œç¾ä¸»ä¹‰å€¾å‘å’Œå¯¹æ•°æ®ç»†èŠ‚çš„æåº¦æ•æ„Ÿã€‚èƒ½å¤Ÿä¸ºé•¿è¿œç›®æ ‡æŠ‘åˆ¶å³æ—¶å†²åŠ¨ï¼Œåœ¨æœ€ç»ˆé‡Šæ”¾æ—¶çˆ†å‘å‡ºæƒŠäººçš„ç»Ÿæ²»åŠ›ã€‚',
    heroes:['å…¬å­™ç¦»','å­™å°šé¦™','é©¬å¯æ³¢ç½—'],dim:{risk:35,emp:40,flex:55,end:95,aut:75}},
  R:{id:'R',name:'æ¸¸èµ°',en:'SUPPORT',title:'å¤§åœ°ä¹‹æ¯',sub:'åŒç†å¿ƒçš„å®ˆæŠ¤è€…',icon:'ğŸ’š',c:'#33CC77',
    desc:'ä½ æ˜¯å›¢é˜Ÿçš„çµé­‚ä¼´ä¾£ã€‚é€šè¿‡æˆå°±ä»–äººï¼Œä½ è·å¾—äº†è¿œè¶…ä¸ªäººè£èª‰çš„å¿ƒç†æ»¡è¶³æ„Ÿã€‚ä½ æ•é”çš„è§‚å¯ŸåŠ›å’ŒåŒ…å®¹å¿ƒè®©æ•´ä¸ªå›¢é˜Ÿåœ¨å±æœºä¸­ä¾ç„¶ä¿æœ‰æ¸©æƒ…ã€‚',
    shr:'é«˜åŒç†å¿ƒ Â· åˆ©ä»–å€¾å‘ Â· å›¢é˜Ÿæ¶¦æ»‘å‰‚',
    per:'å…·å¤‡æé«˜çš„åŒç†å¿ƒä¸äº²ç¤¾ä¼šè¡Œä¸ºå€¾å‘ï¼Œæ“…é•¿å¯Ÿè§‰é˜Ÿå‹å¿ƒç†çŠ¶æ€å¹¶ç»™äºˆæ­£å‘åé¦ˆã€‚é€šè¿‡æˆå°±ä»–äººå®ç°è‡ªæˆ‘ä»·å€¼çš„å…¸å‹åˆ©ä»–ä¸»ä¹‰äººæ ¼ã€‚',
    heroes:['å¤§ä¹”','è”¡æ–‡å§¬','é¬¼è°·å­'],dim:{risk:25,emp:95,flex:60,end:65,aut:45}}
};
const DLBL={risk:'é£é™©åå¥½ & æˆå°±åŠ¨æœº',emp:'åŒç†å¿ƒ & åˆ©ä»–å€¾å‘',flex:'è®¤çŸ¥çµæ´»æ€§ & å¤šä»»åŠ¡',end:'å»¶è¿Ÿæ»¡è¶³ & è€åŠ›',aut:'ç‹¬ç«‹æ€§ & æŠ—å‹æ€§'};

const HEROES=[
  'éŸ©ä¿¡','æç™½','é•œ','å…°é™µç‹','äº‘ä¸­å›','å­™æ‚Ÿç©º','æ©˜å³äº¬','ç™¾é‡Œç„ç­–',
  'è²‚è‰','è¯¸è‘›äº®','ç‹æ˜­å›','èŠˆæœˆ','å«¦å¨¥','ä¸çŸ¥ç«èˆ','å¼ è‰¯','å¥³å¨²','æ¨ç‰ç¯',
  'é“ ','å•å¸ƒ','è€å¤«å­','å¤ä¾¯æƒ‡','å»‰é¢‡','è¾¾æ‘©','äºšç‘Ÿ','å…¸éŸ¦','æ›¹æ“','é¡¹ç¾½',
  'å…¬å­™ç¦»','å­™å°šé¦™','é©¬å¯æ³¢ç½—','è™å§¬','ç‹„ä»æ°','åç¾¿','é»„å¿ ','ä¼½ç½—','è‹',
  'å¤§ä¹”','è”¡æ–‡å§¬','é¬¼è°·å­','å­™è†‘','æ˜ä¸–éš','ç‘¶','æ¢¦å¥‡','ä¸œçš‡å¤ªä¸€','é²ç­ä¸ƒå·',
  'èµµäº‘','å…³ç¾½','å¼ é£','èŠ±æœ¨å…°','é›…å…¸å¨œ','å®«æœ¬æ­¦è—','å¨œå¯éœ²éœ²',
  'ä¸Šå®˜å©‰å„¿','éœ²å¨œ','å…ƒæ­Œ','åº„å‘¨','ç‰›é­”','æµ·æœˆ','è¥¿æ–½','å“ªå’','é’Ÿæ— è‰³',
  'åˆ˜é‚¦','æ­¦åˆ™å¤©','æ‰é¹Š','å¸é©¬æ‡¿','å§œå­ç‰™','ç™½èµ·','ç›˜å¤','å­™ç­–','é’Ÿé¦—'
];

const VSEED={
};

const QS=[
  {id:'q1',tx:'å½“ä½ åœ¨èŒåœºæˆ–å­¦æ ¡é¢å¯¹ä¸€ä¸ªä»æœªæ¥è§¦è¿‡çš„è‰°å·¨ä»»åŠ¡æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'å…´å¥‹ä¸å·²ï¼Œè®¤ä¸ºè¿™æ˜¯è¯æ˜ä¸ªäººèƒ½åŠ›çš„ç»ä½³æœºä¼šï¼Œå³ä¾¿éœ€è¦å­¤å†›å¥‹æˆ˜ã€‚'},
        {k:'b',t:'è¿…é€Ÿå¯»æ‰¾åˆä½œä¼™ä¼´ï¼Œè®¤ä¸ºèµ„æºæ•´åˆä¸å›¢é˜Ÿé…åˆæ‰æ˜¯æˆåŠŸçš„å…³é”®ã€‚'},
        {k:'c',t:'åˆ¶å®šè¯¦ç»†çš„é•¿çº¿è®¡åˆ’ï¼Œä¸è®¡è¾ƒåˆæœŸçš„æ¯ç‡¥ï¼Œåšä¿¡æœ€åä¼šæœ‰å¤§çˆ†å‘ã€‚'},
        {k:'d',t:'è§‚å¯Ÿå…¨å±€ï¼Œå¯»æ‰¾æœ€çœåŠ›çš„åˆ‡å…¥ç‚¹ï¼Œç”¨æœ€é«˜æ•ˆçš„æ–¹å¼è§£å†³æ ¸å¿ƒçŸ›ç›¾ã€‚'}]},
  {id:'q2',tx:'åœ¨æ—¥å¸¸ç¤¾äº¤ä¸­ï¼Œä½ æ‰®æ¼”çš„è§’è‰²é€šå¸¸æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'æ´»è·ƒåˆ†å­ï¼Œèƒ½è¿…é€Ÿå¯Ÿè§‰å¤§å®¶çš„æƒ…ç»ªå˜åŒ–å¹¶è¿›è¡Œè°ƒè§£ã€‚'},
        {k:'b',t:'é‚£ä¸ªé»˜é»˜æŠŠäº‹æƒ…åšå®Œï¼Œä¸éœ€è¦å¤ªå¤šå…³æ³¨çš„"éšå½¢äºº"ã€‚'},
        {k:'c',t:'å¼•é¢†è¯é¢˜ã€è¿½æ±‚æè‡´ç²¾è‡´ä¸å®¡ç¾è¡¨è¾¾çš„äººã€‚'},
        {k:'d',t:'ç›´è¨€ä¸è®³ã€ç›®æ ‡æ„Ÿæå¼ºï¼Œç”šè‡³å¸¦ç‚¹ä¾µç•¥æ€§çš„å†³ç­–è€…ã€‚'}]},
  {id:'q3',tx:'æƒ³è±¡ä½ æ­£åœ¨è¿›è¡Œä¸€åœºæ¿€çƒˆçš„æ‹”æ²³æ¯”èµ›ï¼Œå½“ä½ çš„é˜Ÿä¼å¤„äºåŠ£åŠ¿æ—¶ï¼Œä½ ä¼šï¼Ÿ',
   ops:[{k:'a',t:'å’¬ç´§ç‰™å…³æ­»å®ˆé˜µåœ°ï¼Œå“ªæ€•åŒæ‰‹ç£¨ç ´ä¹Ÿç»ä¸æ¾æ‰‹ã€‚'},
        {k:'b',t:'å¤§å£°å‘¼å–ŠèŠ‚å¥ï¼Œè¯•å›¾é€šè¿‡ç»Ÿä¸€é¢‘ç‡æ¥æ‰­è½¬é¢“åŠ¿ã€‚'},
        {k:'c',t:'æ”¾å¼ƒä¸ªäººèˆ’é€‚å§¿åŠ¿ï¼Œå»å¸®æ‰¶é‚£ä¸ªåŠ›é‡æœ€å¼±çš„é˜Ÿå‹ã€‚'},
        {k:'d',t:'ç§¯è“„åŠ›é‡ï¼Œç­‰å¾…å¯¹æ–¹æ¾æ‡ˆçš„ä¸€ç¬é—´ï¼Œçˆ†å‘å…¨åŠ›ä¸€å‡»ã€‚'}]},
  {id:'q4',tx:'ä½ å¯¹è‹±é›„çš®è‚¤çš„é€‰æ‹©æœ€çœ‹é‡å“ªä¸€ç‚¹ï¼Ÿ',
   ops:[{k:'a',t:'æŠ€èƒ½ç‰¹æ•ˆçš„åä¸½ç¨‹åº¦ï¼Œè¦èƒ½äº§ç”Ÿå¼ºçƒˆçš„è§†è§‰å†²å‡»ã€‚'},
        {k:'b',t:'çš®è‚¤å¸¦æ¥çš„æ‰“å‡»æ‰‹æ„Ÿä¸æ“ä½œæµç•…åº¦ã€‚'},
        {k:'c',t:'è‹±é›„èƒŒåçš„æ•…äº‹èƒŒæ™¯ï¼Œé‚£ç§å®¿å‘½æ„Ÿæˆ–å†å²åº•è•´ã€‚'},
        {k:'d',t:'èƒ½å¤Ÿå½°æ˜¾èº«ä»½çš„ç¨€æœ‰æ€§ä¸ç¤¾äº¤è®¨è®ºåº¦ã€‚'}]},
  {id:'q5',tx:'é¢å¯¹é˜Ÿå‹åœ¨å…¬å…±é¢‘é“å¯¹ä½ çš„æˆ˜ç»©æå‡ºè´¨ç–‘æ—¶ï¼Œä½ çš„å…¸å‹åšæ³•æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'ä¿æŒæ²‰é»˜ï¼Œç”¨æœ€ç»ˆçš„ç»“ç®—æ•°æ®ï¼ˆå¦‚MVPæˆ–é«˜ä¼¤å®³ï¼‰æ— å£°å›å‡»ã€‚'},
        {k:'b',t:'è¿…é€Ÿå¼€å¯è¯­éŸ³è§£é‡ŠåŸå› ï¼Œå¹¶å°è¯•é‡æ–°ç»„ç»‡è¿›æ”»èŠ‚å¥ã€‚'},
        {k:'c',t:'æ— æ‰€è°“ï¼Œåªè¦æœ€åèƒ½èµ¢ï¼Œä¸ªäººè¯„ä»·ä¸é‡è¦ã€‚'},
        {k:'d',t:'å“ªæ€•åµèµ·æ¥ä¹Ÿè¦ç»´æŠ¤è‡ªå·±çš„å°Šä¸¥ï¼Œç»å¯¹ä¸åƒäºã€‚'}]},
  {id:'q6',tx:'å¦‚æœåœ¨ä¸€åœºæˆ˜æ–—ååªèƒ½ç»™ä¸€ä¸ªäººç‚¹èµï¼Œä½ ä¼šç‚¹ç»™ï¼Ÿ',
   ops:[{k:'a',t:'é‚£ä¸ªæ‹¿äº†æœ€å¤šäººå¤´ã€å¸¦é£å…¨åœºçš„å¸¦åˆ€ä¾å«ã€‚'},
        {k:'b',t:'é‚£ä¸ªé»˜é»˜æ‰¿å—ä¼¤å®³ã€ä¸ºä½ æŒ¡ä¸‹è‡´å‘½ä¸€å‡»çš„ä¿æŠ¤è€…ã€‚'},
        {k:'c',t:'é‚£ä¸ªåœ¨å…³é”®æ—¶åˆ»æ¨æ‰é«˜åœ°å¡”ã€æ”¹å˜æˆ˜å±€çš„æˆ˜ç•¥å®¶ã€‚'},
        {k:'d',t:'é‚£ä¸ªæ“ä½œè¡Œäº‘æµæ°´ã€èµå¿ƒæ‚¦ç›®çš„è‰ºæœ¯å®¶ã€‚'}]},
  {id:'q7',tx:'å½“å›¢é˜Ÿåœ¨é‡è¦å†³ç­–ä¸Šäº§ç”Ÿåˆ†æ­§ï¼Œä½ é€šå¸¸ä¼šï¼Ÿ',
   ops:[{k:'a',t:'ç›´æ¥è¯´å‡ºè‡ªå·±çš„åˆ¤æ–­ï¼Œå¿«é€Ÿæ¨åŠ¨æ‰§è¡Œï¼Œä¸æ‹–æ³¥å¸¦æ°´ã€‚'},
        {k:'b',t:'ç»¼åˆå„æ–¹æ„è§ï¼Œæ‰¾åˆ°æœ€ä¼˜çš„æŠ˜ä¸­æ–¹æ¡ˆå†è¡ŒåŠ¨ã€‚'},
        {k:'c',t:'é»˜é»˜æ‰§è¡Œè‡ªå·±è®¤ä¸ºå¯¹çš„æ–¹å‘ï¼Œè®©æœ€ç»ˆç»“æœè¯´è¯ã€‚'},
        {k:'d',t:'å…ˆç…§é¡¾æƒ…ç»ªæœ€ä½è½çš„é‚£ä¸€æ–¹ï¼Œç¨³ä½å›¢é˜ŸçŠ¶æ€å†è¯´ã€‚'}]},
  {id:'q8',tx:'ä½ çš„æ—¥å¸¸æ—¶é—´ç®¡ç†é£æ ¼æ›´æ¥è¿‘ï¼Ÿ',
   ops:[{k:'a',t:'åŒæ—¶æ¨è¿›å¤šä»¶äº‹ï¼Œé ä¿¡æ¯å¯†åº¦ä¿æŒé«˜æ•ˆç‡ã€‚'},
        {k:'b',t:'ä¸€æ¬¡åªåšä¸€ä»¶äº‹ï¼Œè¿½æ±‚æ¯é¡¹ä»»åŠ¡çš„æè‡´å®Œæˆåº¦ã€‚'},
        {k:'c',t:'æŠ“ä½æœ€é«˜ä¼˜å…ˆçº§ç›®æ ‡ï¼Œå…¶ä»–äº‹é¡¹æš‚æ—¶æç½®ã€‚'},
        {k:'d',t:'æ ¹æ®ä»–äººéœ€æ±‚çµæ´»è°ƒæ•´è‡ªå·±çš„èŠ‚å¥ï¼Œé…åˆä¸ºå…ˆã€‚'}]},
  {id:'q9',tx:'åœ¨ä¸€æ¬¡é‡è¦çš„å›¢é˜Ÿå¤±è´¥åï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'ç‹¬è‡ªæ¶ˆåŒ–æƒ…ç»ªï¼Œç»ä¸è®©åˆ«äººçœ‹åˆ°è‡ªå·±çš„è„†å¼±ã€‚'},
        {k:'b',t:'ç«‹åˆ»å¤ç›˜åˆ†æå¤±è¯¯èŠ‚ç‚¹ï¼Œå¯»æ‰¾ä¸‹æ¬¡çš„æœºä¼šã€‚'},
        {k:'c',t:'ä¸»åŠ¨å®‰æ…°æƒ…ç»ªæœ€ä½è½çš„é˜Ÿå‹ï¼Œå…ˆç¨³å®šå›¢é˜Ÿã€‚'},
        {k:'d',t:'åå¤å›æº¯è‡ªå·±æ¯ä¸€ä¸ªæ“ä½œç»†èŠ‚ï¼Œè¿½æ±‚æ‰¾åˆ°ç²¾ç¡®åŸå› ã€‚'}]},
  {id:'q10',tx:'ä½ å¦‚ä½•çœ‹å¾…"å­¤ç‹¬"è¿™ä»¶äº‹ï¼Ÿ',
   ops:[{k:'a',t:'äº«å—ç‹¬å¤„ï¼Œå­¤ç‹¬æ˜¯æ·±åº¦æ€è€ƒä¸è‡ªæˆ‘æ‰“ç£¨çš„æ¸©åºŠã€‚'},
        {k:'b',t:'å­¤ç‹¬æ—¶ä¼šä¸»åŠ¨æ‰¾äººè¿æ¥ï¼Œæƒ…æ„ŸæµåŠ¨å¯¹æˆ‘å¾ˆé‡è¦ã€‚'},
        {k:'c',t:'åˆ©ç”¨ç‹¬å¤„æ—¶é—´è§„åˆ’æˆ˜ç•¥ï¼Œç‹¬å¤„æ˜¯è“„åŠ›çš„è¿‡ç¨‹ã€‚'},
        {k:'d',t:'å­¤ç‹¬ä»¤æˆ‘æ— èŠï¼Œæˆ‘åœ¨çƒ­é—¹æ°›å›´ä¸­æ›´æœ‰åˆ›é€ åŠ›ã€‚'}]},
  {id:'q11',tx:'ä½ è´Ÿè´£ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œæœ€åœ¨æ„ä»€ä¹ˆï¼Ÿ',
   ops:[{k:'a',t:'è¿›åº¦å’Œæ•ˆç‡ï¼Œåœ¨æœ€çŸ­æ—¶é—´å†…å–å¾—å†³å®šæ€§çªç ´ã€‚'},
        {k:'b',t:'æ¯ä¸ªç»†èŠ‚çš„ç²¾å‡†åº¦ï¼Œä¸èƒ½æœ‰ä»»ä½•é—æ¼æˆ–å·®é”™ã€‚'},
        {k:'c',t:'å›¢é˜Ÿæˆå‘˜çš„çŠ¶æ€ä¸åä½œæ°›å›´æ˜¯å¦å¥åº·ã€‚'},
        {k:'d',t:'ä¿¡æ¯æ•´åˆä¸å…¨å±€æˆ˜ç•¥çš„è¿è´¯æ€§å’Œå®Œæ•´æ€§ã€‚'}]},
  {id:'q12',tx:'ä½ åœ¨é«˜å‹çŠ¶æ€ä¸‹çš„è¡¨ç°é€šå¸¸æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'å‹åŠ›è¶Šå¤§è¶Šæ¸…é†’ï¼Œèƒ½åœ¨æ··ä¹±ä¸­çœ‹åˆ°æ›´å¤šæœºä¼šã€‚'},
        {k:'b',t:'ç”¨æ•°æ®å’Œé€»è¾‘åˆ†æå¹³å¤æƒ…ç»ªï¼Œç†æ€§å…ˆè¡Œã€‚'},
        {k:'c',t:'ä¸»åŠ¨å‘å¤–é‡Šæ”¾ï¼Œæ‰¾äººå€¾è¯‰æˆ–å¯»æ±‚æ”¯æŒã€‚'},
        {k:'d',t:'å…³ä¸Šé—¨ç‹¬è‡ªæ‰›ï¼Œç»ä¸æŠŠè„†å¼±æš´éœ²ç»™ä»–äººã€‚'}]},
  {id:'q13',tx:'ä¸æœ‹å‹å‘ç”ŸçŸ›ç›¾æ—¶ï¼Œä½ é€šå¸¸æ€ä¹ˆå¤„ç†ï¼Ÿ',
   ops:[{k:'a',t:'ç›´æ¥å½“é¢æŠŠè¯è¯´æ¸…æ¥šï¼Œä¸æ‹–ä¸ç»•ä¸ç•™éš”é˜‚ã€‚'},
        {k:'b',t:'å…ˆç»™è‡ªå·±å‡ å¤©å†·é™æœŸï¼Œå†æ‰¾åˆé€‚æ—¶æœºæ²Ÿé€šã€‚'},
        {k:'c',t:'ä¸»åŠ¨é€’å°é˜¶ï¼Œç»´æŠ¤å…³ç³»çš„ä¼˜å…ˆçº§é«˜äºäº‰å¯¹é”™ã€‚'},
        {k:'d',t:'ç”¨è¡ŒåŠ¨è€Œéè¯­è¨€åŒ–è§£ï¼Œæ¯”å¦‚è¯·åƒé¥­æˆ–é€ç¤¼ç‰©ã€‚'}]},
  {id:'q14',tx:'ä½ å¯¹"èƒœåˆ©"çš„å®šä¹‰æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'å‡»è´¥å¼ºæ•Œï¼Œå®Œæˆæ‰€æœ‰äººéƒ½è®¤ä¸ºä¸å¯èƒ½çš„äº‹ã€‚'},
        {k:'b',t:'å›¢é˜Ÿæ•´ä½“çš„è¡¨ç°è¶…å‡ºæ‰€æœ‰äººçš„é¢„æœŸã€‚'},
        {k:'c',t:'åœ¨ç»å¯¹åŠ£åŠ¿ä¸­åšæŒåˆ°æœ€åï¼Œå®ç°æƒŠå¤©å¤§é€†è½¬ã€‚'},
        {k:'d',t:'ç”¨æœ€å°‘çš„èµ„æºï¼Œå®ç°æœ€å¤§åŒ–çš„é•¿æœŸæ”¶ç›Šã€‚'}]},
  {id:'q15',tx:'é¢å¯¹çªå¦‚å…¶æ¥çš„æ··ä¹±å±€é¢ï¼Œä½ çš„æœ¬èƒ½ååº”æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'è¿…é€Ÿæ‰¾åˆ°æœ€å…·å†³å®šæ€§çš„çªç ´èŠ‚ç‚¹å¹¶æœæ–­åˆ‡å…¥ã€‚'},
        {k:'b',t:'ç¨³ä½è‡ªå·±çš„èŠ‚å¥ï¼Œä¸è¢«å¤–éƒ¨çš„æ··ä¹±æ‰€å¹²æ‰°ã€‚'},
        {k:'c',t:'ç¬¬ä¸€æ—¶é—´åˆ¤æ–­å“ªä¸ªé˜Ÿå‹æœ€éœ€è¦å¸®åŠ©å¹¶èµ¶å»æ”¯æ´ã€‚'},
        {k:'d',t:'å†·é™è§‚å¯Ÿï¼Œè®°å½•ä¿¡æ¯ï¼Œç­‰å¾…ä¸€å‡»åˆ¶èƒœçš„æœ€ä½³æ—¶æœºã€‚'}]},
  {id:'q16',tx:'ä½ çš„æ¶ˆè´¹è§‚æ›´æ¥è¿‘å“ªç§ï¼Ÿ',
   ops:[{k:'a',t:'æ„¿æ„ä¸ºæ•ˆç‡å·¥å…·å’Œèƒ½åŠ›æå‡ä»˜è´¹ï¼ŒæŠ•èµ„è‡ªå·±æœ€åˆ’ç®—ã€‚'},
        {k:'b',t:'è¿½æ±‚ç²¾è‡´ä½“éªŒï¼Œæ„¿æ„ä¸ºç¾æ„Ÿå’Œå“è´¨æ”¯ä»˜æº¢ä»·ã€‚'},
        {k:'c',t:'æåº¦ç†æ€§ï¼Œæ¯ä¸€ç¬”æ”¯å‡ºéƒ½è¦ç²¾æ‰“ç»†ç®—ï¼Œæ²¡æœ‰æµªè´¹ã€‚'},
        {k:'d',t:'æ„¿æ„ä¸ºåˆ«äººèŠ±é’±ï¼Œé€ç¤¼æ¯”ä¹°ç»™è‡ªå·±æ›´æœ‰æˆå°±æ„Ÿã€‚'}]},
  {id:'q17',tx:'åœ¨ç«äº‰ä¸­ï¼Œä½ æœ€æ— æ³•å¿å—çš„æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'å› ä¸ºé˜Ÿå‹ç²—å¿ƒå¤§æ„çš„å¤±è¯¯ï¼Œå¯¼è‡´æ•´ä½“åŠŸäºä¸€ç¯‘ã€‚'},
        {k:'b',t:'è‡ªå·±çš„æ­£ç¡®æˆ˜ç•¥åˆ¤æ–­æ²¡æœ‰è¢«å›¢é˜Ÿé‡‡çº³å’Œæ‰§è¡Œã€‚'},
        {k:'c',t:'åœ¨æœ€åå…³å¤´å› ä¸ºèµ„æºåŒ®ä¹è€Œæ— åŠ›å›å¤©ã€‚'},
        {k:'d',t:'é˜Ÿå‹åœ¨ä½è°·æœŸç›¸äº’æŒ‡è´£ï¼Œè€Œéæºæ‰‹å…±æ¸¡éš¾å…³ã€‚'}]},
  {id:'q18',tx:'ä½ ç†æƒ³ä¸­çš„å·¥ä½œæˆ–å­¦ä¹ ç¯å¢ƒæ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'é«˜åº¦è‡ªç”±ï¼Œå¯ä»¥ç‹¬ç«‹å†³ç­–ã€ç‹¬ç«‹æ‰§è¡Œï¼Œä¸å—æŸç¼šã€‚'},
        {k:'b',t:'å……æ»¡åˆºæ¿€å’Œå˜åŒ–ï¼Œæ¯å¤©éƒ½é¢å¯¹æ–°æŒ‘æˆ˜å’Œæ–°ä¿¡æ¯ã€‚'},
        {k:'c',t:'æœ‰æ¸…æ™°çš„æˆé•¿è·¯å¾„ï¼Œèƒ½çœ‹åˆ°åŠªåŠ›ç§¯ç´¯çš„é•¿æœŸå›æŠ¥ã€‚'},
        {k:'d',t:'æ°›å›´æ¸©æš–ï¼Œå›¢é˜Ÿå…³ç³»å’Œæƒ…æ„Ÿè¿æ¥æ¯”ç»“æœæ›´é‡è¦ã€‚'}]},
  {id:'q19',tx:'åœ¨ç¤¾äº¤åœºåˆä¸­ï¼Œä½ å€¾å‘äºï¼Ÿ',
   ops:[{k:'a',t:'ä¸»åŠ¨å‡ºå‡»ï¼Œå¿«é€Ÿè®¤è¯†æ–°æœ‹å‹ï¼Œä¸æ–­æ‰©å¤§ç¤¾äº¤åœˆã€‚'},
        {k:'b',t:'æ·±è€•ç°æœ‰å°åœˆå­é‡Œçš„æƒ…æ„Ÿè”ç»“ï¼Œå®ç¼ºæ¯‹æ»¥ã€‚'},
        {k:'c',t:'å…¨åœºè§‚å¯Ÿï¼Œé”å®šæœ€å€¼å¾—æ·±äº¤çš„é‚£ä¸ªäººé‡ç‚¹ç»è¥ã€‚'},
        {k:'d',t:'äº«å—äººç¾¤çš„çƒ­é—¹æ°”æ°›ï¼Œä½†å†…å¿ƒæ›´çè§†ç‹¬å¤„çš„å®é™ã€‚'}]},
  {id:'q20',tx:'ä½ è®¤ä¸ºè‡ªå·±æœ€æ ¸å¿ƒçš„äººæ ¼ç‰¹è´¨æ˜¯ï¼Ÿ',
   ops:[{k:'a',t:'æ°¸ä¸æ”¾å¼ƒï¼Œå“ªæ€•ç‹¬è‡ªé¢å¯¹æœ€è‰°éš¾çš„ç»å¢ƒä¹Ÿç»ä¸è®¤è¾“ã€‚'},
        {k:'b',t:'æ´å¯ŸåŠ›ï¼Œæ€»èƒ½é€è¿‡ç°è±¡çœ‹ç©¿é—®é¢˜çš„æœ¬è´¨å’Œè§„å¾‹ã€‚'},
        {k:'c',t:'åŒç†å¿ƒï¼ŒçœŸå¿ƒå…³å¿ƒæ¯ä¸€ä¸ªèº«è¾¹äººçš„æ„Ÿå—ä¸éœ€è¦ã€‚'},
        {k:'d',t:'è€å¿ƒï¼Œèƒ½å¤Ÿä¸ºäº†é•¿è¿œç›®æ ‡å®ˆå€™æ¼«é•¿çš„ç­‰å¾…æ—¶æœºã€‚'}]}
];

const W={
  q1:{a:{J:2,C:3},b:{M:1,R:4},c:{C:1,G:4},d:{J:3,M:2}},
  q2:{a:{M:1,R:4},b:{C:4,R:1},c:{M:3,G:2},d:{J:4,C:1}},
  q3:{a:{C:5},b:{J:2,M:3},c:{R:5},d:{G:5}},
  q4:{a:{M:4,G:1},b:{J:3,C:2},c:{J:1,M:1,C:1,G:1,R:1},d:{J:4,R:1}},
  q5:{a:{G:3,J:2},b:{M:3,R:2},c:{C:2,R:3},d:{J:3,C:2}},
  q6:{a:{J:5},b:{R:5},c:{C:5},d:{M:5}},
  q7:{a:{J:2,C:3},b:{M:3,R:2},c:{C:3,G:2},d:{R:5}},
  q8:{a:{M:4},b:{G:3,C:2},c:{J:3,M:1},d:{R:4}},
  q9:{a:{C:3,G:2},b:{J:3,M:2},c:{R:5},d:{G:4}},
  q10:{a:{C:4,G:2},b:{R:3,M:2},c:{J:4},d:{M:3}},
  q11:{a:{J:3},b:{G:4,C:1},c:{R:4,M:1},d:{M:4}},
  q12:{a:{J:3,C:2},b:{G:3},c:{R:3,M:2},d:{C:4}},
  q13:{a:{J:2,C:3},b:{G:3,C:2},c:{R:4},d:{C:2,G:2}},
  q14:{a:{J:4},b:{M:3,R:2},c:{C:4},d:{G:4}},
  q15:{a:{J:4,M:1},b:{C:4},c:{R:5},d:{G:4}},
  q16:{a:{J:2,G:2},b:{M:4},c:{G:3,C:2},d:{R:4}},
  q17:{a:{C:3,G:2},b:{J:3,M:2},c:{G:4},d:{R:4}},
  q18:{a:{J:3,C:2},b:{J:2,M:2},c:{G:4},d:{R:4}},
  q19:{a:{J:2,M:3},b:{R:3,C:2},c:{M:3,J:2},d:{C:3,G:2}},
  q20:{a:{C:5},b:{M:3,J:2},c:{R:5},d:{G:5}}
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let curQ=0,sc={J:0,M:0,C:0,G:0,R:0};
let myRes=null,myPred=null,myHero=null,shareUrl='';
let qHistory=[]; // [{qid, k, w}] for back button
let activeQS=[]; // æ¯æ¬¡éšæœºæŠ½å–çš„é¢˜ç›®
const QUIZ_SIZE=8; // æ¯æ¬¡ä»20é¢˜ä¸­æŠ½å–çš„æ•°é‡
let vSelected=[]; // currently selected heroes for voting
let customHeroSet=new Set(); // ç”¨æˆ·è‡ªå®šä¹‰è¾“å…¥çš„è‹±é›„

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function go(id){
  document.querySelectorAll('.sec').forEach(s=>s.classList.remove('on'));
  document.getElementById(id).classList.add('on');
  window.scrollTo({top:0,behavior:'smooth'});
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PARTICLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
  const cv=document.getElementById('bgc'),cx=cv.getContext('2d');
  function rsz(){cv.width=innerWidth;cv.height=innerHeight}rsz();
  window.addEventListener('resize',rsz);
  const mk=()=>({x:Math.random()*cv.width,y:Math.random()*cv.height,
    r:Math.random()*1.8+.3,vx:(Math.random()-.5)*.25,vy:(Math.random()-.5)*.25,
    op:Math.random()*.45+.05,g:Math.random()>.72});
  const pts=Array.from({length:130},mk);
  (function tick(){
    cx.clearRect(0,0,cv.width,cv.height);
    pts.forEach(p=>{
      p.x+=p.vx;p.y+=p.vy;
      if(p.x<0||p.x>cv.width||p.y<0||p.y>cv.height)Object.assign(p,mk());
      cx.save();cx.globalAlpha=p.op;cx.fillStyle=p.g?'#D4AF37':'#fff';
      cx.beginPath();cx.arc(p.x,p.y,p.r,0,Math.PI*2);cx.fill();cx.restore();
    });
    requestAnimationFrame(tick);
  })();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROLE CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildRoles(){
  document.getElementById('rgrid').innerHTML=Object.values(ROLES).map(r=>`
    <div class="rcd" style="--rc:${r.c}">
      <span class="rico">${r.icon}</span>
      <div class="rnm">${r.name}</div><div class="ren">${r.en}</div>
      <div class="rds">${r.per}</div>
      <div class="rhrs">${r.heroes.map(h=>`<span class="rht">${h}</span>`).join('')}</div>
    </div>`).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initQ(){
  curQ=0;sc={J:0,M:0,C:0,G:0,R:0};qHistory=[];
  // éšæœºæ‰“ä¹±QSå¹¶æŠ½å–QUIZ_SIZEé“é¢˜
  const shuffled=[...QS].sort(()=>Math.random()-.5);
  activeQS=shuffled.slice(0,QUIZ_SIZE);
  renderQ();
}
function renderQ(){
  const q=activeQS[curQ],pct=Math.round(curQ/activeQS.length*100);
  document.getElementById('qpf').style.width=pct+'%';
  document.getElementById('qptx').textContent=`${curQ} / ${activeQS.length}`;
  document.getElementById('qw').innerHTML=`
    <div class="qcd">
      <div class="qnum">é—®é¢˜ ${curQ+1} / ${activeQS.length}</div>
      <div class="qtxt">${q.tx}</div>
      <div class="qops">${q.ops.map(o=>`
        <button class="qop" onclick="pick('${q.id}','${o.k}')">
          <span class="olk">${o.k.toUpperCase()}</span><span>${o.t}</span>
        </button>`).join('')}
      </div>
      ${curQ>0?'<div style="text-align:center"><button class="qback" onclick="goBack()">â† è¿”å›ä¸Šä¸€é¢˜</button></div>':''}
    </div>`;
}
function pick(qid,k){
  const w=W[qid]?.[k]||{};
  qHistory.push({qid,k,w});
  Object.entries(w).forEach(([r,v])=>sc[r]+=v);
  const cd=document.querySelector('.qcd');
  cd.style.transition='opacity .28s,transform .28s';
  cd.style.opacity='0';cd.style.transform='translateX(-24px)';
  setTimeout(()=>{
    curQ++;
    if(curQ<activeQS.length){
      renderQ();
      document.getElementById('qpf').style.width=Math.round(curQ/activeQS.length*100)+'%';
      document.getElementById('qptx').textContent=`${curQ} / ${activeQS.length}`;
    }else{
      document.getElementById('qpf').style.width='100%';
      document.getElementById('qptx').textContent=`${activeQS.length} / ${activeQS.length}`;
      go('s4');setTimeout(showRes,1800);
    }
  },300);
}
function goBack(){
  if(qHistory.length===0)return;
  const last=qHistory.pop();
  Object.entries(last.w).forEach(([r,v])=>sc[r]-=v);
  curQ--;
  const cd=document.querySelector('.qcd');
  if(cd){
    cd.style.transition='opacity .2s,transform .2s';
    cd.style.opacity='0';cd.style.transform='translateX(24px)';
  }
  setTimeout(()=>{
    renderQ();
    document.getElementById('qpf').style.width=Math.round(curQ/activeQS.length*100)+'%';
    document.getElementById('qptx').textContent=`${curQ} / ${activeQS.length}`;
  },220);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showRes(){
  const sorted=Object.entries(sc).sort((a,b)=>b[1]-a[1]);
  const pid=sorted[0][0],sid=sorted[1][0];
  myRes=pid;
  const P=ROLES[pid],S=ROLES[sid];

  document.getElementById('prc').innerHTML=`
    <div style="background:linear-gradient(145deg,${P.c}20,${P.c}0d);border:1px solid ${P.c}88;
      border-radius:24px;padding:54px 44px;text-align:center;backdrop-filter:blur(16px);">
      <div style="display:inline-flex;align-items:center;gap:6px;padding:5px 18px;border-radius:20px;
        font-size:11px;letter-spacing:3px;margin-bottom:22px;border:1px solid ${P.c}66;color:${P.c}">
        ${P.en} &nbsp;Â·&nbsp; ${P.name}
      </div>
      <div style="font-size:76px;display:block;margin:0 auto 20px;animation:flt 3s ease-in-out infinite;
        filter:drop-shadow(0 0 20px ${P.c});color:${P.c}">${P.icon}</div>
      <div style="font-size:12px;letter-spacing:5px;color:${P.c}99;margin-bottom:6px">ä½ çš„å³¡è°·çµé­‚</div>
      <div style="font-size:38px;font-weight:900;color:${P.c};line-height:1.2;margin-bottom:6px">${P.title}</div>
      <div style="font-size:17px;color:${P.c}bb;margin-bottom:28px">${P.sub}</div>
      <p style="font-size:14px;line-height:1.95;max-width:480px;margin:0 auto 28px;opacity:.85">${P.desc}</p>
      <div style="display:flex;justify-content:center;flex-wrap:wrap;gap:8px">
        ${P.heroes.map(h=>`<span style="padding:8px 20px;background:rgba(255,255,255,.08);
          border:1px solid ${P.c}44;border-radius:20px;font-size:13px;color:${P.c}cc">${h}</span>`).join('')}
      </div>
    </div>`;

  document.getElementById('scd').innerHTML=`
    <div style="background:linear-gradient(135deg,${S.c}14,transparent);border:1px solid ${S.c}44;
      border-radius:16px;padding:28px 32px;display:flex;align-items:center;gap:22px;
      backdrop-filter:blur(12px);animation:cin .7s ease .25s backwards;width:100%">
      <span style="font-size:48px;filter:drop-shadow(0 0 10px ${S.c})">${S.icon}</span>
      <div>
        <div style="font-size:11px;letter-spacing:3px;color:${S.c}88;margin-bottom:4px">ç¬¬äºŒçµé­‚å½’å± Â· ${S.en}</div>
        <div style="font-size:20px;font-weight:700;color:${S.c};margin-bottom:6px">${S.name} Â· ${S.sub}</div>
        <div style="font-size:12px;color:var(--mute);line-height:1.6">${S.shr}</div>
      </div>
    </div>`;

  document.getElementById('dmp').innerHTML=`
    <div class="dmh">â—† äººæ ¼ç»´åº¦åˆ†æ</div>
    ${Object.entries(P.dim).map(([k,v])=>`
      <div class="dmr">
        <div class="dml">${DLBL[k]}</div>
        <div class="dmt"><div class="dmf" style="background:linear-gradient(90deg,${P.c}88,${P.c});width:${v}%"></div></div>
        <span class="dmp2" style="color:${P.c}">${v}%</span>
      </div>`).join('')}`;

  // Show back-to-results button in voting page
  document.getElementById('vback-res').style.display='inline-flex';

  go('s5');
  checkFriendLane();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   URL PARAMS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function getParams(){
  const p=new URLSearchParams(location.search);
  return{ref:p.get('ref'),pred:p.get('predict'),hero:p.get('hero')};
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FRIEND LANE COMPARISON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function checkFriendLane(){
  const{ref,pred,hero}=getParams();
  if(!ref||!pred||!ROLES[ref]||!ROLES[pred])return;
  const SH=ROLES[ref],PR=ROLES[pred];

  document.getElementById('fcmp').innerHTML=`
    <div style="font-size:11px;letter-spacing:4px;color:var(--gold);margin-bottom:12px">æ¥è‡ªå¥½å‹çš„æŒ‘æˆ˜</div>
    <p style="font-size:15px;line-height:1.9">
      ä½ çš„å¥½å‹æ˜¯ <strong style="color:${SH.c}">${SH.icon} ${SH.name}ä½</strong> ç©å®¶<br>
      ä»–/å¥¹é¢„æµ‹ä½ æ˜¯ï¼š<strong style="color:${PR.c};font-size:20px">${PR.icon} ${PR.name}</strong>
    </p>`;
  document.getElementById('fcmp').classList.add('on');

  const rw=document.getElementById('rwp');
  if(myRes===pred){
    rw.style.cssText='background:linear-gradient(135deg,rgba(212,175,55,.18),rgba(255,170,0,.08));border:1px solid rgba(212,175,55,.5);border-radius:16px;padding:32px;text-align:center;margin-bottom:28px;animation:cin .5s ease';
    rw.innerHTML=`<span style="font-size:48px;display:block;margin-bottom:12px">ğŸŒŸ</span>
      <div style="font-size:20px;font-weight:700;color:var(--gold);margin-bottom:10px">ğŸ‰ å¥½å‹çŒœå¯¹äº†åˆ†è·¯ï¼</div>
      <p style="font-size:13px;color:var(--mute);line-height:1.8">
        ä½ çš„å¥½å‹æˆåŠŸé¢„æµ‹äº†ä½ çš„å³¡è°·çµé­‚åˆ†è·¯ï¼<br>
        ${hero?'ç°åœ¨å»çŒœçŒœä»–çš„<strong style="color:var(--gold)">æœ¬å‘½è‹±é›„</strong>ï¼Œè¾¾æˆåŒé‡æŒ‘æˆ˜ï¼Œè§£é”æœ€é«˜ç§°å·ï¼':'æˆªå›¾ä¿å­˜è¿™ä¸€åˆ»ï¼Œå‘ç»™å¥½å‹ä¸€èµ·åº†ç¥ï¼'}
      </p>`;
    rw.classList.add('on');
    if(!hero)setTimeout(confetti,400);
  }else{
    const MR=ROLES[myRes];
    rw.style.cssText='background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:32px;text-align:center;margin-bottom:28px;animation:cin .5s ease';
    rw.innerHTML=`<span style="font-size:48px;display:block;margin-bottom:12px">ğŸ¤”</span>
      <div style="font-size:20px;font-weight:700;color:var(--mute);margin-bottom:10px">å¥½å‹åˆ†è·¯é¢„æµ‹å¤±è¯¯â€¦â€¦</div>
      <p style="font-size:13px;color:var(--mute);line-height:1.8">
        å¥½å‹é¢„æµ‹ä½ æ˜¯ <strong style="color:${PR.c}">${PR.name}</strong>ï¼Œ
        ä½†ä½ å®é™…çš„çµé­‚åˆ†è·¯æ˜¯ <strong style="color:${MR.c}">${MR.icon} ${MR.name}</strong>ï¼<br>
        ${hero?'å»çŒœçŒœå¥½å‹çš„æœ¬å‘½è‹±é›„ï¼Œè¿˜æœ‰æœºä¼šæ‰³å›ä¸€åŸï¼':'ç»§ç»­åˆ†äº«æµ‹è¯„ï¼Œæ·±å…¥æ¢ç´¢å½¼æ­¤çš„å³¡è°·çµé­‚ï½'}
      </p>`;
    rw.classList.add('on');
  }

  if(hero){
    document.getElementById('btn-hero-guess').style.display='inline-flex';
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO GRID HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderHeroGrid(gridId,onClickFn){
  document.getElementById(gridId).innerHTML=
    HEROES.map(h=>`<button class="hbt" data-h="${h}" onclick="${onClickFn}('${h}')">${h}</button>`).join('');
}
function filterH(srcId,gridId){
  const term=document.getElementById(srcId).value;
  document.querySelectorAll(`#${gridId} .hbt`).forEach(b=>{
    b.style.display=b.dataset.h.includes(term)?'':'none';
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO GUESS (friend mode â€“ s6)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initHeroGuess(){
  renderHeroGrid('hg-grid','guessHero');
  document.getElementById('hcrs').classList.remove('on');
  document.getElementById('hc-card').style.display='block';
}
function guessHero(guessed){
  const{hero:actual}=getParams();
  if(!actual)return;
  document.getElementById('hc-card').style.display='none';
  const rs=document.getElementById('hcrs');
  const correct=guessed.trim()===decodeURIComponent(actual).trim();
  if(correct){
    const{ref,pred}=getParams();
    const laneCorrct=myRes===pred;
    rs.style.cssText='background:linear-gradient(135deg,rgba(212,175,55,.2),rgba(255,170,0,.08));border:1px solid rgba(212,175,55,.6);border-radius:14px;padding:28px;text-align:center;margin-bottom:20px;display:block;animation:cin .4s ease';
    rs.innerHTML=`
      <div style="font-size:52px;margin-bottom:12px">${laneCorrct?'ğŸ†':'ğŸ¯'}</div>
      <div style="font-size:20px;font-weight:700;color:var(--gold);margin-bottom:10px">
        ${laneCorrct?'ğŸ‰ åŒé‡æŒ‘æˆ˜å…¨éƒ¨å‘½ä¸­ï¼è§£é”æœ€é«˜ç§°å·ï¼':'ğŸ¯ æœ¬å‘½è‹±é›„çŒœå¯¹äº†ï¼'}
      </div>
      <p style="font-size:13px;color:var(--mute);line-height:1.8">
        å¥½å‹çš„æœ¬å‘½è‹±é›„æ­£æ˜¯ <strong style="color:var(--gold);font-size:16px">${guessed}</strong>ï¼Œä½ çŒœå¯¹äº†ï¼<br>
        ${laneCorrct
          ?'åˆ†è·¯ + æœ¬å‘½è‹±é›„åŒåŒçŒœä¸­ï¼<br>ä½ ä»¬å·²å…±åŒè§£é”ä¸“å±æœ€é«˜ç§°å·ï¼š<strong style="color:var(--gold)">ã€Œå³¡è°·çµé­‚ä¼´ä¾£ã€âœ¨</strong>'
          :'æœ¬å‘½è‹±é›„æŒ‘æˆ˜æˆåŠŸï¼æˆªå›¾ä¿å­˜è¿™ä¸€åˆ»ï½'}
      </p>`;
    rs.classList.add('on');
    setTimeout(confetti,300);
  }else{
    rs.style.cssText='background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:28px;text-align:center;margin-bottom:20px;display:block;animation:cin .4s ease';
    rs.innerHTML=`
      <div style="font-size:52px;margin-bottom:12px">ğŸ˜…</div>
      <div style="font-size:20px;font-weight:700;color:var(--mute);margin-bottom:10px">æ²¡çŒœä¸­â€¦â€¦</div>
      <p style="font-size:13px;color:var(--mute);line-height:1.8">
        ä½ çŒœçš„æ˜¯ <strong style="color:#FF3B3B">${guessed}</strong>ï¼Œä½†å¥½å‹çš„æœ¬å‘½è‹±é›„å¦æœ‰å…¶äººï½<br>
        å¥½å¥½ç ”ç©¶ä¸€ä¸‹å†å»æŒ‘æˆ˜ä»–å§ï¼
      </p>`;
    rs.classList.add('on');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARE (s7)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initSh(){
  document.getElementById('pops').innerHTML=Object.values(ROLES).map(r=>`
    <button class="pbt" data-id="${r.id}" onclick="setPred('${r.id}')"
      style="border-color:${r.c}33;color:${r.c}bb">${r.icon} ${r.name}</button>`).join('');
  renderHeroGrid('hp-grid','setHero');
  document.getElementById('lbx').style.display='none';
  document.getElementById('bcpy').style.display='none';
  document.getElementById('bgen').textContent='ğŸ”—  ç”Ÿæˆä¸“å±é“¾æ¥';
}
function setPred(id){
  myPred=id;
  document.querySelectorAll('.pbt').forEach(b=>b.classList.toggle('on',b.dataset.id===id));
  document.getElementById('pblk').classList.remove('err');
}
function setHero(h){
  myHero=h;
  document.querySelectorAll('#hp-grid .hbt').forEach(b=>b.classList.toggle('on',b.dataset.h===h));
  const row=document.getElementById('hp-sel');
  document.getElementById('hp-sel-name').textContent=h;
  row.style.display='block';
  document.getElementById('hp-srch').style.display='none';
  document.getElementById('hp-grid').style.display='none';
}
function clearHero(){
  myHero=null;
  document.querySelectorAll('#hp-grid .hbt').forEach(b=>b.classList.remove('on'));
  document.getElementById('hp-sel').style.display='none';
  document.getElementById('hp-srch').style.display='block';
  document.getElementById('hp-grid').style.display='flex';
}
function genLnk(){
  if(!myPred){
    const pb=document.getElementById('pblk');
    pb.classList.add('err');pb.style.animation='shk .4s ease';
    setTimeout(()=>{pb.style.animation='';pb.classList.remove('err');},500);
    return;
  }
  const base=location.href.split('?')[0];
  const heroParam=myHero?`&hero=${encodeURIComponent(myHero)}`:'';
  shareUrl=`${base}?ref=${myRes}&predict=${myPred}${heroParam}`;
  const lb=document.getElementById('lbx');
  lb.textContent=shareUrl;lb.style.display='block';
  document.getElementById('bcpy').style.display='inline-flex';
  document.getElementById('bgen').textContent='ğŸ”„  é‡æ–°ç”Ÿæˆ';
}
function cpyLnk(){
  const btn=document.getElementById('bcpy');
  const fb=()=>{const t=document.createElement('textarea');t.value=shareUrl;document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);};
  (navigator.clipboard?navigator.clipboard.writeText(shareUrl):Promise.reject()).catch(fb).finally(()=>{
    btn.textContent='âœ“  å·²å¤åˆ¶ï¼';btn.style.color='#33CC77';btn.style.borderColor='#33CC77';
    setTimeout(()=>{btn.textContent='ğŸ“‹  å¤åˆ¶é“¾æ¥';btn.style.color='';btn.style.borderColor='';},2200);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARE IMAGE GENERATION (#2)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function generateShareImg(){
  if(!myRes){alert('è¯·å…ˆå®Œæˆæµ‹è¯„å†ä¿å­˜åˆ†äº«å›¾');return;}
  const P=ROLES[myRes];
  const W=800,H=450;
  const cv=document.createElement('canvas');
  cv.width=W;cv.height=H;
  const cx=cv.getContext('2d');

  // Dark background
  cx.fillStyle='#07070F';
  cx.fillRect(0,0,W,H);

  // Radial glow center
  const rg=cx.createRadialGradient(W/2,H*0.45,20,W/2,H*0.45,260);
  rg.addColorStop(0,P.c+'33');
  rg.addColorStop(1,'transparent');
  cx.fillStyle=rg;
  cx.fillRect(0,0,W,H);

  // Top color strip
  const tg=cx.createLinearGradient(0,0,W,0);
  tg.addColorStop(0,P.c+'00');
  tg.addColorStop(0.5,P.c+'cc');
  tg.addColorStop(1,P.c+'00');
  cx.fillStyle=tg;
  cx.fillRect(0,0,W,3);

  // Bottom strip
  cx.fillStyle=tg;
  cx.fillRect(0,H-3,W,3);

  // Top label: site name
  cx.font='12px sans-serif';
  cx.fillStyle='rgba(212,175,55,0.5)';
  cx.textAlign='center';
  cx.fillText('ç‹è€…è£è€€ Â· å³¡è°·äººæ ¼ç ”ç©¶æ‰€', W/2, 36);

  // Role EN label
  cx.font='bold 13px sans-serif';
  cx.fillStyle=P.c+'99';
  cx.fillText(P.en, W/2, 88);

  // Icon (emoji)
  cx.font='72px serif';
  cx.fillText(P.icon, W/2, 176);

  // Title
  cx.font='bold 52px serif';
  cx.fillStyle=P.c;
  cx.fillText(P.title, W/2, 258);

  // Sub
  cx.font='22px serif';
  cx.fillStyle='#EDE8D8cc';
  cx.fillText(P.sub, W/2, 300);

  // Traits
  cx.font='14px sans-serif';
  cx.fillStyle='#8A8AA8';
  cx.fillText(P.shr, W/2, 342);

  // Heroes
  cx.font='13px sans-serif';
  cx.fillStyle=P.c+'aa';
  cx.fillText('ä»£è¡¨è‹±é›„ï¼š' + P.heroes.join(' Â· '), W/2, 376);

  // Bottom URL
  cx.font='12px sans-serif';
  cx.fillStyle='rgba(212,175,55,0.4)';
  cx.fillText('wzry.xuziyu.my', W/2, H-20);

  cv.toBlob(blob=>{
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');
    a.download=`å³¡è°·çµé­‚æ¡£æ¡ˆ_${P.name}.png`;
    a.href=url;
    a.click();
    setTimeout(()=>URL.revokeObjectURL(url),1000);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VOTING (#10)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const VCKEY='wzry_voted_v1'; // ä»…åœ¨æœ¬åœ°æµè§ˆå™¨è®°å½•æ˜¯å¦å·²æŠ•ç¥¨


function initVoting(){
  vSelected=[];
  const voted=JSON.parse(localStorage.getItem(VCKEY)||'null');
  if(voted){
    showVotedState(voted);
  }else{
    document.getElementById('v-voted-banner').style.display='none';
    document.getElementById('v-vote-form').style.display='block';
    renderVGrid();
    updateVSelInfo();
  }
  // å®æ—¶æ¦œå•ç”± Firebase onValue ç›‘å¬å™¨è‡ªåŠ¨é©±åŠ¨
}

function renderVGrid(){
  const allH=[...HEROES,...customHeroSet];
  document.getElementById('vgrid').innerHTML=allH.map(h=>{
    const safe=h.replace(/"/g,'&quot;');
    return `<button class="vbt" data-h="${safe}" onclick="toggleVote(this.dataset.h)">${h}</button>`;
  }).join('');
}

function filterVGrid(){
  const term=document.getElementById('vsrch').value.trim();
  let anyVis=false;
  document.querySelectorAll('#vgrid .vbt').forEach(b=>{
    const show=!term||b.dataset.h.includes(term);
    b.style.display=show?'':'none';
    if(show)anyVis=true;
  });
  const addRow=document.getElementById('vadd-row');
  if(term&&!anyVis){
    document.getElementById('vadd-name').textContent=term;
    addRow.style.display='block';
  }else{
    addRow.style.display='none';
  }
}

function addCustomHero(){
  const name=document.getElementById('vsrch').value.trim();
  if(!name||vSelected.includes(name))return;
  customHeroSet.add(name);
  renderVGrid();
  // æ¢å¤å·²é€‰çŠ¶æ€é«˜äº®
  document.querySelectorAll('#vgrid .vbt').forEach(b=>{
    const sel=vSelected.includes(b.dataset.h);
    const full=vSelected.length>=3&&!sel;
    b.classList.toggle('on',sel);
    b.classList.toggle('dis',full);
  });
  // è‡ªåŠ¨é€‰ä¸­è¯¥è‹±é›„
  toggleVote(name);
  document.getElementById('vsrch').value='';
  document.getElementById('vadd-row').style.display='none';
}
function toggleVote(h){
  const idx=vSelected.indexOf(h);
  if(idx>-1){
    vSelected.splice(idx,1);
  }else{
    if(vSelected.length>=3)return;
    vSelected.push(h);
  }
  document.querySelectorAll('#vgrid .vbt').forEach(b=>{
    const sel=vSelected.includes(b.dataset.h);
    const full=vSelected.length>=3&&!sel;
    b.classList.toggle('on',sel);
    b.classList.toggle('dis',full);
  });
  updateVSelInfo();
}

function updateVSelInfo(){
  const n=vSelected.length;
  const el=document.getElementById('vsel-info');
  if(n===0){
    el.textContent='è¯·é€‰æ‹©æœ€å¤š 3 ä½è‹±é›„ï¼ˆå·²é€‰ 0 / 3ï¼‰';
  }else{
    el.textContent=`å·²é€‰ ${n} / 3ï¼š${vSelected.join('ã€')}`;
  }
}

function submitVote(){
  if(vSelected.length===0){alert('è¯·è‡³å°‘é€‰æ‹© 1 ä½è‹±é›„');return;}
  if(!fbDb){
    // Firebase æœªé…ç½®æ—¶é™çº§æœ¬åœ°
    localStorage.setItem(VCKEY,JSON.stringify(vSelected));
    showVotedState(vSelected);
    setTimeout(()=>switchVTab('rank'),600);
    return;
  }
  const btn=document.querySelector('#vp-vote .bg');
  if(btn){btn.disabled=true;btn.textContent='æäº¤ä¸­â€¦â€¦';}
  // è¶…æ—¶å…œåº•ï¼š15ç§’æœªå“åº”åˆ™æ¢å¤æŒ‰é’®
  const vTimer=setTimeout(()=>{
    if(btn&&btn.disabled){btn.disabled=false;btn.textContent='ğŸ—³ï¸Â  ç¡®è®¤æŠ•ç¥¨';}
    alert('æŠ•ç¥¨è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•');
  },15000);
  try{
    // ç”¨ transaction å†™ç¥¨ï¼šæ— è®ºå½“å‰å€¼æ˜¯è´Ÿæ•°è¿˜æ˜¯0ï¼ŒæŠ•ç¥¨åè‡³å°‘ä¸º1
    const ps=vSelected.map(h=>
      fbDb.ref('votes/'+h).transaction(cur=>Math.max(0,cur||0)+1)
    );
    Promise.all(ps).then(()=>{
      clearTimeout(vTimer);
      localStorage.setItem(VCKEY,JSON.stringify(vSelected));
      localStorage.setItem('wzry_voted_fb','1');
      showVotedState(vSelected);
      setTimeout(()=>switchVTab('rank'),600);
    }).catch(err=>{
      clearTimeout(vTimer);
      alert('æŠ•ç¥¨æäº¤å¤±è´¥ï¼š'+err.message);
      if(btn){btn.disabled=false;btn.textContent='ğŸ—³ï¸Â  ç¡®è®¤æŠ•ç¥¨';}
    });
  }catch(e){
    clearTimeout(vTimer);
    console.error('Firebase äº‹åŠ¡é”™è¯¯:',e);
    alert('æŠ•ç¥¨å¤±è´¥ï¼š'+e.message);
    if(btn){btn.disabled=false;btn.textContent='ğŸ—³ï¸Â  ç¡®è®¤æŠ•ç¥¨';}
  }
}

function showVotedState(voted){
  document.getElementById('v-voted-banner').style.display='block';
  document.getElementById('v-vote-form').style.display='none';
  document.getElementById('v-voted-names').textContent=voted.join('ã€');
}

function resetVote(){
  const voted=JSON.parse(localStorage.getItem(VCKEY)||'null');
  const inFb=localStorage.getItem('wzry_voted_fb');
  if(voted&&fbDb&&inFb){
    // ç”¨ transaction æ‰£ç¥¨ï¼Œç¡®ä¿ä¸ä¼šä½äº 0
    voted.forEach(h=>{
      fbDb.ref('votes/'+h).transaction(cur=>Math.max(0,(cur||0)-1));
    });
  }
  localStorage.removeItem(VCKEY);
  localStorage.removeItem('wzry_voted_fb');
  vSelected=[];
  customHeroSet=new Set();
  document.getElementById('v-voted-banner').style.display='none';
  document.getElementById('v-vote-form').style.display='block';
  renderVGrid();
  updateVSelInfo();
  document.getElementById('vsrch').value='';
  document.getElementById('vadd-row').style.display='none';
}

function renderVoteResultsFromData(data){
  const voted=JSON.parse(localStorage.getItem(VCKEY)||'null')||[];
  const sorted=Object.entries(data).filter(([,v])=>v>0).sort((a,b)=>b[1]-a[1]);
  const top=sorted.slice(0,20);
  const maxV=top[0]?top[0][1]:1;
  const total=sorted.reduce((s,[,v])=>s+v,0);
  const el=document.getElementById('vtotal-info');
  if(el)el.textContent=`ç´¯è®¡ ${total.toLocaleString()} ç¥¨ï¼ˆå®æ—¶æ±‡æ€»ï¼‰`;
  const list=document.getElementById('vbar-list');
  if(!list)return;
  if(top.length===0){
    list.innerHTML='<div style="text-align:center;color:var(--mute);padding:20px 0;font-size:13px">æš‚æ— æŠ•ç¥¨æ•°æ®ï¼Œå¿«æ¥ç¬¬ä¸€ä¸ªæŠ•ç¥¨å§ï¼</div>';
    return;
  }
  list.innerHTML=top.map(([h,v],i)=>{
    const pct=Math.round(v/maxV*100);
    const isVoted=voted.includes(h);
    const medal=i===0?'ğŸ¥‡':i===1?'ğŸ¥ˆ':i===2?'ğŸ¥‰':'';
    return `<div class="vbar-row">
      <span class="vbar-rank">${medal||i+1}</span>
      <span class="vbar-name${isVoted?' voted':''}"> ${h}${isVoted?' âœ“':''}</span>
      <div class="vbar-track"><div class="vbar-fill${isVoted?' voted':''}" style="width:${pct}%"></div></div>
      <span class="vbar-cnt">${v.toLocaleString()}</span>
    </div>`;
  }).join('');
}

function switchVTab(tab){
  document.getElementById('vtab-vote').classList.toggle('on',tab==='vote');
  document.getElementById('vtab-rank').classList.toggle('on',tab==='rank');
  document.getElementById('vp-vote').classList.toggle('on',tab==='vote');
  document.getElementById('vp-rank').classList.toggle('on',tab==='rank');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function confetti(){
  const cv=document.getElementById('cfc'),cx=cv.getContext('2d');
  cv.width=innerWidth;cv.height=innerHeight;cv.style.display='block';
  const C=['#D4AF37','#FFE566','#FF3B3B','#BB44FF','#33CC77','#FFAA00','#3388FF','#fff'];
  const ps=Array.from({length:200},()=>({
    x:Math.random()*cv.width,y:-20-Math.random()*200,
    sz:Math.random()*9+4,col:C[Math.floor(Math.random()*C.length)],
    sp:Math.random()*4+2,dr:(Math.random()-.5)*2.5,
    ro:Math.random()*Math.PI*2,rv:(Math.random()-.5)*.15,rect:Math.random()>.5
  }));
  let f=0;
  (function draw(){
    cx.clearRect(0,0,cv.width,cv.height);
    ps.forEach(p=>{
      p.y+=p.sp;p.x+=p.dr;p.ro+=p.rv;
      cx.save();cx.translate(p.x,p.y);cx.rotate(p.ro);
      cx.globalAlpha=Math.max(0,1-p.y/cv.height*1.2);cx.fillStyle=p.col;
      p.rect?cx.fillRect(-p.sz/2,-p.sz/4,p.sz,p.sz/2):(cx.beginPath(),cx.arc(0,0,p.sz/2,0,Math.PI*2),cx.fill());
      cx.restore();
    });
    if(++f<240)requestAnimationFrame(draw);else cv.style.display='none';
  })();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESTART
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function restart(){
  myRes=null;myPred=null;myHero=null;shareUrl='';
  sc={J:0,M:0,C:0,G:0,R:0};qHistory=[];
  document.getElementById('fcmp').classList.remove('on');
  document.getElementById('rwp').classList.remove('on');
  document.getElementById('btn-hero-guess').style.display='none';
  go('s3');initQ();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.addEventListener('DOMContentLoaded',()=>{
  buildRoles();
  initFirebase();
  const{ref,pred,hero}=getParams();
  if(ref&&pred&&ROLES[ref]&&ROLES[pred]){
    const SH=ROLES[ref],PR=ROLES[pred];
    document.getElementById('hsub').innerHTML=`
      ä½ çš„å¥½å‹ï¼ˆ<strong style="color:${SH.c}">${SH.icon} ${SH.name}ä½</strong> ç©å®¶ï¼‰<br>
      é¢„æµ‹ä½ æ˜¯ <strong style="color:${PR.c}">${PR.icon} ${PR.name}</strong> ç©å®¶<br>
      ${hero?'è¿˜è®¾ç½®äº†ä¸€ä¸ª<strong style="color:var(--gold)">æœ¬å‘½è‹±é›„è°œé¢˜</strong>ç­‰ä½ æ¥çŒœï¼<br>':''}
      å®Œæˆæµ‹è¯„ï¼Œæ­æ™“ç­”æ¡ˆï¼`;
  }
});
</script>
</body>
</html>
